<!DOCTYPE html>
<html lang="en">
<head>
    <meta name="theme-color" content="#000000">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="manifest" href="/manifest.json">
    <link rel="apple-touch-icon" href="/icons/icon-180x180.png">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <title>Trading-X</title>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            background: #000;
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
            font-family: 'Orbitron', sans-serif;
            cursor: pointer;
        }

        .bg-glow {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 400px;
            height: 400px;
            background: radial-gradient(circle, rgba(0, 212, 255, 0.08) 0%, transparent 70%);
            border-radius: 50%;
            animation: breathe 3s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.5; }
            50% { transform: translate(-50%, -50%) scale(1.3); opacity: 0.8; }
        }

        .splash {
            position: relative;
            z-index: 10;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0;
        }

        .tx-logo {
            width: 80px;
            height: 64px;
            border: 2.5px solid #00d4ff;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 32px;
            font-weight: 900;
            color: #00d4ff;
            margin-bottom: 28px;
            opacity: 0;
            transform: scale(0.5);
            animation: logoIn 0.6s cubic-bezier(0.34, 1.56, 0.64, 1) 0.2s forwards;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3), inset 0 0 20px rgba(0, 212, 255, 0.05);
        }

        @keyframes logoIn {
            0% { opacity: 0; transform: scale(0.5); }
            100% { opacity: 1; transform: scale(1); }
        }

        .brand {
            display: flex;
            align-items: center;
            gap: 0;
            margin-bottom: 20px;
            opacity: 0;
            animation: fadeUp 0.5s ease-out 0.5s forwards;
        }

        .brand-trading { font-size: 28px; font-weight: 700; color: #fff; letter-spacing: 1px; }
        .brand-trading .t-accent { color: #00d4ff; }
        .brand-dash { font-size: 28px; font-weight: 700; color: #fff; margin: 0 2px; }
        .brand-x { font-size: 28px; font-weight: 900; color: #00d4ff; text-shadow: 0 0 10px rgba(0, 212, 255, 0.5); }

        .line {
            width: 0;
            height: 1.5px;
            background: linear-gradient(90deg, transparent, #00d4ff, transparent);
            margin-bottom: 22px;
            animation: lineExpand 0.6s ease-out 0.8s forwards;
        }

        @keyframes lineExpand {
            0% { width: 0; }
            100% { width: 200px; }
        }

        .welcome {
            font-family: 'Rajdhani', sans-serif;
            font-size: 16px;
            font-weight: 500;
            color: rgba(255, 255, 255, 0.6);
            letter-spacing: 5px;
            text-transform: uppercase;
            opacity: 0;
            animation: fadeUp 0.5s ease-out 1.0s forwards;
        }

        @keyframes fadeUp {
            0% { opacity: 0; transform: translateY(12px); }
            100% { opacity: 1; transform: translateY(0); }
        }

        .progress-wrap {
            position: fixed;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
            opacity: 0;
            animation: fadeUp 0.4s ease-out 1.2s forwards;
        }

        .progress-bar {
            width: 120px;
            height: 2px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 2px;
            overflow: hidden;
        }

        .progress-fill {
            width: 0%;
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #0099cc);
            border-radius: 2px;
            animation: fillBar 2.5s linear 0.5s forwards;
        }

        @keyframes fillBar {
            0% { width: 0%; }
            100% { width: 100%; }
        }

        .skip-text {
            font-family: 'Rajdhani', sans-serif;
            font-size: 11px;
            color: rgba(255, 255, 255, 0.3);
            letter-spacing: 2px;
        }

        .fade-out { animation: fadeOut 0.4s ease-out forwards; }
        @keyframes fadeOut { 0% { opacity: 1; } 100% { opacity: 0; } }

        .particle {
            position: fixed;
            width: 2px;
            height: 2px;
            background: #00d4ff;
            border-radius: 50%;
            opacity: 0;
            pointer-events: none;
        }

        @keyframes floatUp {
            0% { opacity: 0; transform: translateY(0); }
            20% { opacity: 0.6; }
            100% { opacity: 0; transform: translateY(-100vh); }
        }
    </style>
</head>
<body onclick="skipToMain()">
    <div class="bg-glow"></div>
    <div id="particles"></div>

    <div class="splash" id="splash">
        <div class="tx-logo">TX</div>
        <div class="brand">
            <span class="brand-trading"><span class="t-accent">T</span>rading</span>
            <span class="brand-dash">-</span>
            <span class="brand-x">X</span>
        </div>
        <div class="line"></div>
        <div class="welcome">Welcome Back</div>
    </div>

    <div class="progress-wrap">
        <div class="progress-bar">
            <div class="progress-fill" id="progressFill"></div>
        </div>
        <div class="skip-text">TAP TO SKIP</div>
    </div>

    <script>
        // ★ 토큰 없으면 기존 인트로로
        if (!localStorage.getItem('access_token')) {
            window.location.replace('intro.html');
        }

        var isNavigating = false;

        // 파티클
        (function() {
            var container = document.getElementById('particles');
            for (var i = 0; i < 15; i++) {
                var p = document.createElement('div');
                p.className = 'particle';
                p.style.left = (Math.random() * 100) + 'vw';
                p.style.top = (60 + Math.random() * 40) + 'vh';
                p.style.animation = 'floatUp ' + (4 + Math.random() * 4) + 's linear ' + (Math.random() * 3) + 's infinite';
                p.style.width = p.style.height = (1 + Math.random() * 2) + 'px';
                container.appendChild(p);
            }
        })();

        // 3초 후 자동 이동
        setTimeout(function() { goToMain(); }, 3000);

        function skipToMain() { goToMain(); }

        function goToMain() {
            if (isNavigating) return;
            isNavigating = true;
            // ★ 마지막 활동 시간 갱신
            localStorage.setItem('last_active_ts', Date.now().toString());
            document.body.classList.add('fade-out');
            setTimeout(function() {
                window.location.replace('index.html?from_welcome=1');
            }, 400);
        }
    </script>
</body>
</html>
