<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Trading-X</title>
    <script>
        // Ïù∏Ìä∏Î°ú Ï≤¥ÌÅ¨ - Ïù∏Ìä∏Î°úÎ•º Ïïà Î¥§ÏúºÎ©¥ intro.htmlÎ°ú Î¶¨Îã§Ïù¥Î†âÌä∏
        if (!sessionStorage.getItem('intro_shown')) {
            window.location.replace('intro.html');
        }
    </script>
    <script src="https://unpkg.com/lightweight-charts@3.8.0/dist/lightweight-charts.standalone.production.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/chart.css">
</head>
<body>
    <div class="app">
        <!-- Ìó§Îçî -->
        <div class="header">
            <div class="header-title" style="font-size: 23px; font-weight: 700; display: flex; align-items: center; color: #ffffff;">
                <svg width="32" height="23" viewBox="0 0 32 23" style="margin-right: 10px; vertical-align: middle;">
                    <rect x="1" y="1" width="30" height="21" rx="3" fill="none" stroke="#00d4ff" stroke-width="2"/>
                    <text x="16" y="16.5" font-size="14" font-weight="900" fill="#00d4ff" font-family="Arial" text-anchor="middle">TX</text>
                </svg>
                Trading-X
            </div>
            <div class="header-status">
                <span id="modeBadge" style="display: none; padding: 3px 8px; border-radius: 4px; font-size: 10px; font-weight: bold; margin-right: 8px; letter-spacing: 0.5px;"></span>
                <div class="status-dot disconnected" id="statusDot"></div>
                <span id="headerStatus">Connecting...</span>
            </div>
        </div>
        
        <!-- Ïª®ÌÖêÏ∏† -->
        <div class="content">
            <!-- ========== Ìôà ÌÉ≠ ========== -->
            <div class="page active" id="page-home">
                
                <!-- Í∏¥Í∏â Í≥µÏßÄ Î∞∞ÎÑà -->
                <div class="notice-banner" id="noticeBanner" style="display: none;">
                    <div class="notice-content">
                        <span class="notice-icon">üì¢</span>
                        <span class="notice-text" id="noticeText">ÏÑúÎ≤Ñ Ï†êÍ≤Ä ÏïàÎÇ¥ (1/20 02:00~04:00)</span>
                    </div>
                    <button class="notice-close" onclick="closeNoticeBanner()">‚úï</button>
                </div>
                
                <div class="welcome-banner">
                    <!-- ÏãúÍ∞ÑÎåÄÎ≥Ñ Ïù∏ÏÇ¨ -->
                    <div class="greeting-section">
                        <div style="text-align: center;">
                            <span class="greeting-text" id="greetingText" style="font-size: 32px; font-weight: 600; white-space: nowrap;">Good Evening, Trader! üåô</span>
                        </div>
                        <span class="greeting-sub" id="greetingSub" style="font-size: 13px; font-weight: 600;">Ïò§Îäò ÌïòÎ£® ÏàòÍ≥†ÌïòÏÖ®Ïñ¥Ïöî!</span>
                    </div>
                    
                    <!-- Î™®Îìú ÌëúÏãú -->
                    <div id="heroModeBadge" style="margin-top: 18px; font-size: 26px; font-weight: 700; color: #ffffff; letter-spacing: 3px;">
                        Trading-X Demo
                    </div>
                </div>
                
                <!-- ÌîÑÎ°úÎ™®ÏÖò Î∞∞ÎÑà (Ïã¨Ìîå) -->
<div class="promo-slider-container">
    <div class="promo-slider" id="promoSlider">
        <!-- Ïπ¥Îìú 1: ÏπúÍµ¨ Ï¥àÎåÄ -->
        <div class="promo-card" style="background: linear-gradient(135deg, #1e2530 0%, #151a22 100%); border-color: var(--border-color);">
            <div class="promo-content" style="flex: 1;">
                <div class="promo-title" style="font-size: 18px; font-weight: 700;">ÏπúÍµ¨ Ï¥àÎåÄÌïòÍ≥† $50 Î∞õÍ∏∞!</div>
                <div class="promo-desc" style="font-size: 12px;">Ï∂îÏ≤úÏù∏ ÏΩîÎìúÎ•º Í≥µÏú†ÌïòÍ≥† Î≥¥ÎÑàÏä§Î•º Î∞õÏúºÏÑ∏Ïöî</div>
            </div>
            <div class="promo-action">
                <button class="promo-btn" style="background: linear-gradient(135deg, #00b450 0%, #008040 100%); color: #fff; font-size: 13px; font-weight: 600; padding: 8px 14px;" onclick="showToast('Ï∂îÏ≤ú ÏΩîÎìú: TRADEX2024', 'success')">ÏΩîÎìú Î≥µÏÇ¨</button>
            </div>
        </div>
        
        <!-- Ïπ¥Îìú 2: Ïã†Í∑ú Í∞ÄÏûÖ Ïù¥Î≤§Ìä∏ -->
        <div class="promo-card" style="background: linear-gradient(135deg, #1e2530 0%, #151a22 100%); border-color: var(--border-color);">
            <div class="promo-content" style="flex: 1;">
                <div class="promo-title" style="font-size: 18px; font-weight: 700;">Ïã†Í∑ú Í∞ÄÏûÖ Ïù¥Î≤§Ìä∏!</div>
                <div class="promo-desc" style="font-size: 12px;">Ï≤´ ÏûÖÍ∏à Ïãú 100% Î≥¥ÎÑàÏä§ ÏßÄÍ∏â</div>
            </div>
            <div class="promo-action">
                <button class="promo-btn" style="background: linear-gradient(135deg, #8a2be2 0%, #6a1bb2 100%); color: #fff; font-size: 13px; font-weight: 600; padding: 8px 14px;">ÏûêÏÑ∏Ìûà ‚Üí</button>
            </div>
        </div>
        
        <!-- Ïπ¥Îìú 3: VIP ÌîÑÎ°úÍ∑∏Îû® -->
        <div class="promo-card" style="background: linear-gradient(135deg, #1e2530 0%, #151a22 100%); border-color: var(--border-color);">
            <div class="promo-content" style="flex: 1;">
                <div class="promo-title" style="font-size: 18px; font-weight: 700;">VIP ÌîÑÎ°úÍ∑∏Îû®</div>
                <div class="promo-desc" style="font-size: 12px;">Í±∞ÎûòÎüâÏóê Îî∞Î•∏ ÌäπÎ≥Ñ ÌòúÌÉùÏùÑ ÎàÑÎ¶¨ÏÑ∏Ïöî</div>
            </div>
            <div class="promo-action">
                <button class="promo-btn" style="background: linear-gradient(135deg, #ffa500 0%, #cc8400 100%); color: #fff; font-size: 13px; font-weight: 600; padding: 8px 14px;">Í∞ÄÏûÖÌïòÍ∏∞</button>
            </div>
        </div>
    </div>
    
    <!-- Ïä¨ÎùºÏù¥Îìú Ïù∏ÎîîÏºÄÏù¥ÌÑ∞ -->
    <div class="promo-indicators">
        <span class="promo-dot active" onclick="scrollToPromo(0)"></span>
        <span class="promo-dot" onclick="scrollToPromo(1)"></span>
        <span class="promo-dot" onclick="scrollToPromo(2)"></span>
    </div>
</div>
                
                <!-- Trading Mode Ï†ÑÌôò -->
                <div class="card">
                    <div class="card-title" style="font-size: 16px; font-weight: 700;">
                        <span class="material-icons-round" style="color: #00d4ff; margin-right: 8px; font-size: 18px;">sync_alt</span>
                        <span style="position: relative; top: -3px;">Trading Mode</span>
                    </div>
                    <div class="trading-mode-selector">
                        <button class="mode-select-btn active" id="modeDemoBtn" onclick="switchTradingMode('demo')">
                            <div class="mode-select-info" style="text-align: center; width: 100%;">
                                <div class="mode-select-name">DEMO</div>
                                <div class="mode-select-desc">Practice Trading</div>
                            </div>
                            <div class="mode-select-check" id="demoCheck">‚úì</div>
                        </button>
                        <button class="mode-select-btn" id="modeLiveBtn" onclick="switchTradingMode('live')">
                            <div class="mode-select-info" style="text-align: center; width: 100%;">
                                <div class="mode-select-name">LIVE</div>
                                <div class="mode-select-desc">Real Trading</div>
                            </div>
                            <div class="mode-select-check" id="liveCheck" style="display: none;">‚úì</div>
                        </button>
                    </div>
                    <div class="mode-status" id="modeStatus">
                        <span class="mode-status-dot demo"></span>
                        <span>Currently in <strong>Demo Mode</strong> - Practice with virtual $10,000</span>
                    </div>
                </div>
                
                <!-- MT5 Account Ïó∞Í≤∞ -->
                <div class="card" id="mt5AccountSection">
                    <div class="card-title" style="font-size: 16px; font-weight: 700;">
                        <span class="material-icons-round" style="color: #00d4ff; margin-right: 8px; font-size: 18px;">link</span>
                        <span style="position: relative; top: -3px;">MT5 Account</span>
                    </div>
                    
                    <!-- Ïó∞Í≤∞ Ïïà Îê® ÏÉÅÌÉú -->
                    <div class="mt5-not-connected" id="mt5NotConnected" style="padding: 15px 10px;">
                        <div style="display: flex; align-items: center; justify-content: center; gap: 12px; margin-bottom: 15px;">
                            <div style="font-size: 36px; opacity: 0.7;">üîó</div>
                            <div style="text-align: left;">
                                <div class="mt5-empty-text" style="font-size: 16px; font-weight: 600; margin-bottom: 2px;">ÏïÑÏßÅ Ïó∞Í≤∞Îêú MT5 Í≥ÑÏ¢åÍ∞Ä ÏóÜÏäµÎãàÎã§</div>
                                <div class="mt5-empty-sub" style="font-size: 12px; margin: 0;">Live Í±∞ÎûòÎ•º ÏúÑÌï¥ MT5 Í≥ÑÏ¢åÎ•º Ïó∞Í≤∞ÌïòÏÑ∏Ïöî</div>
                            </div>
                        </div>
                        <div class="mt5-buttons">
                            <button class="mt5-connect-btn" onclick="openMT5ConnectModal()">
                                <span class="material-icons-round" style="font-size: 18px;">link</span>
                                MT5 Í≥ÑÏ¢å Ïó∞Í≤∞ÌïòÍ∏∞
                            </button>
                            <button class="mt5-guide-btn" onclick="openMT5GuideModal()">
                                <span class="material-icons-round" style="font-size: 18px;">help_outline</span>
                                Ïã†Í∑ú Í≥ÑÏ¢å Í∞úÏÑ§ ÏïàÎÇ¥
                            </button>
                        </div>
                    </div>
                    
                    <!-- Ïó∞Í≤∞Îê® ÏÉÅÌÉú -->
                    <!-- Ïó∞Í≤∞Îê® ÏÉÅÌÉú -->
<div class="mt5-connected" id="mt5Connected" style="display: none; position: relative;">
    <div class="mt5-status-badge" style="position: absolute; top: -35px; right: 0;">
        <span class="mt5-status-dot"></span>
        Connected
    </div>
                        <div class="mt5-info-grid">
                            <div class="mt5-info-item">
                                <span class="mt5-info-label">Broker</span>
                                <span class="mt5-info-value" id="mt5Broker">-</span>
                            </div>
                            <div class="mt5-info-item">
                                <span class="mt5-info-label">Account</span>
                                <span class="mt5-info-value" id="mt5Account">-</span>
                            </div>
                            <div class="mt5-info-item">
                                <span class="mt5-info-label">Server</span>
                                <span class="mt5-info-value" id="mt5Server">-</span>
                            </div>
                            <div class="mt5-info-item">
                                <span class="mt5-info-label">Leverage</span>
                                <span class="mt5-info-value" id="mt5Leverage">-</span>
                            </div>
                        </div>
                        <button class="mt5-disconnect-btn" onclick="disconnectMT5()">
                            <span class="material-icons-round" style="font-size: 16px;">link_off</span>
                            Ïó∞Í≤∞ Ìï¥Ï†ú
                        </button>
                    </div>
                </div>
                
                <!-- Account Overview (ÌÜµÌï©) -->
                <div class="card">
                    <div class="card-title" style="font-size: 16px; font-weight: 700;">
                        <span class="material-icons-round" style="color: #00d4ff; margin-right: 8px; font-size: 18px;">account_balance</span>
                        <span style="position: relative; top: -3px;">Account Overview</span>
                    </div>
                    
                    <!-- Í≥ÑÏ†ï Ï†ïÎ≥¥ Î∞ïÏä§ -->
                    <div style="background: var(--bg-tertiary); border-radius: 10px; padding: 12px 15px; margin-bottom: 10px;">
                        <div class="info-row" style="border-bottom: 1px solid var(--border-color);"><span class="info-label">Broker</span><span class="info-value" id="homeBroker">-</span></div>
                        <div class="info-row" style="border-bottom: 1px solid var(--border-color);"><span class="info-label">Account</span><span class="info-value" id="homeAccount">-</span></div>
                        <div class="info-row" style="border-bottom: 1px solid var(--border-color);"><span class="info-label">Leverage</span><span class="info-value" id="homeLeverage">-</span></div>
                        <div class="info-row" style="border-bottom: none;"><span class="info-label">Server</span><span class="info-value" id="homeServer">-</span></div>
                    </div>
                    
                    <!-- ÏûêÏÇ∞ Ï†ïÎ≥¥ Î∞ïÏä§ -->
                    <div style="background: var(--bg-tertiary); border-radius: 10px; padding: 12px 15px;">
                        <div class="info-row" style="border-bottom: 1px solid var(--border-color);"><span class="info-label">Balance</span><span class="info-value" id="homeBalance">$0.00</span></div>
                        <div class="info-row" style="border-bottom: 1px solid var(--border-color);"><span class="info-label">Equity</span><span class="info-value" id="homeEquity">$0.00</span></div>
                        <div class="info-row" style="border-bottom: 1px solid var(--border-color);"><span class="info-label">Free Margin</span><span class="info-value" id="homeFreeMargin">$0.00</span></div>
                        <div class="info-row" style="border-bottom: none;"><span class="info-label">Open Positions</span><span class="info-value" id="homePositions">0</span></div>
                    </div>
                </div>
                
                <!-- Demo Ï∂©Ï†Ñ Î≤ÑÌäº (Demo Î™®ÎìúÏóêÏÑúÎßå ÌëúÏãú) -->
                <div class="card" id="demoControlCard" style="display: none;">
                    <div class="card-title" style="font-size: 16px; font-weight: 700;">
                        <span class="material-icons-round" style="color: #00d4ff; margin-right: 8px; font-size: 18px;">monetization_on</span><span style="position: relative; top: -3px;">Demo Control</span>
                    </div>
                    <div style="display: flex; gap: 10px; margin-top: 12px;">
                        <button onclick="topupDemo()" style="flex: 1; padding: 14px; background: linear-gradient(135deg, #00b450, #00d46a); border: none; border-radius: 10px; color: white; font-weight: 700; cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 6px;">
                            <span class="material-icons-round" style="font-size: 18px;">add_card</span> $10,000 Ï∂©Ï†Ñ
                        </button>
                        <button onclick="resetDemo()" style="flex: 1; padding: 14px; background: linear-gradient(135deg, #ff6b35, #ff8c42); border: none; border-radius: 10px; color: white; font-weight: 700; cursor: pointer; font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 6px;">
                            <span class="material-icons-round" style="font-size: 18px;">restart_alt</span> ÏûîÍ≥† Î¶¨ÏÖã
                        </button>
                    </div>
                    <p style="font-size: 12px; color: #ffffff; margin-top: 10px; text-align: center;">üíé ÏµúÎåÄ ÏûîÍ≥†: $100,000</p>
                </div>
            </div>
            
            <!-- ========== Ï∞®Ìä∏ ÌÉ≠ ========== -->
            <div class="page" id="page-chart">
                
                <!-- Ï¢ÖÎ™© Î™©Î°ù (Watchlist) -->
                <div class="watchlist-container" id="watchlistContainer">
                    <div class="watchlist-header">
                        <button class="watchlist-search" onclick="openSymbolSearch()">
                            <span class="material-icons-round" style="font-size: 20px;">search</span>
                        </button>
                        <div class="watchlist-tabs" id="watchlistTabs">
                            <button class="watchlist-tab active" onclick="switchWatchlistTab('popular')" data-tab="popular">Popular</button>
                            <button class="watchlist-tab" onclick="switchWatchlistTab('favorites')" data-tab="favorites">‚≠ê Favorites</button>
                            <button class="watchlist-tab" onclick="switchWatchlistTab('forex')" data-tab="forex">Forex</button>
                            <button class="watchlist-tab" onclick="switchWatchlistTab('crypto')" data-tab="crypto">Crypto</button>
                            <button class="watchlist-tab" onclick="switchWatchlistTab('indices')" data-tab="indices">Indices</button>
                            <button class="watchlist-tab" onclick="switchWatchlistTab('metals')" data-tab="metals">Metals</button>
                            <button class="watchlist-tab" onclick="switchWatchlistTab('energy')" data-tab="energy">Energy</button>
                        </div>
                    </div>
                    <div class="watchlist-content" id="watchlistContent">
                        <!-- Ï¢ÖÎ™©Îì§Ïù¥ Ïó¨Í∏∞Ïóê ÎèôÏ†ÅÏúºÎ°ú Ï∂îÍ∞ÄÎê® -->
                    </div>
                </div>
                
                <!-- Ï∞®Ìä∏ ÏÉÅÏÑ∏ ÌéòÏù¥ÏßÄ -->
                <div class="chart-detail-container" id="chartDetailContainer">
                
                <!-- Ï∞®Ìä∏ Í∏ÄÎ°úÏö∞ Î∞ïÏä§ (Ìó§Îçî + Ï∞®Ìä∏ + Ìò∏Í∞Ä) -->
                <div class="chart-glow-box">
                
                <!-- Symbol Row -->
                <div class="chart-symbol-row">
                    <div class="chart-symbol-info" onclick="toggleChartSymbolDropdown()">
                        <span class="chart-symbol-icon" id="chartSymbolIcon" style="color: #f7931a;">‚Çø</span>
                        <div>
                            <div style="display: flex; align-items: center; gap: 5px;">
                                <span class="chart-symbol-name" id="chartSymbolName">Bitcoin</span>
                                <span style="color: var(--text-muted); font-size: 12px;">‚ñº</span>
                            </div>
                            <div class="chart-symbol-id" id="chartSymbolId">BTCUSD</div>
                        </div>
                    </div>
                    
                    <!-- Î≤ÑÌäº Í∑∏Î£π (Î≥¥Ï°∞ÏßÄÌëú + ÌÉÄÏûÑÌîÑÎ†àÏûÑ) -->
                    <div class="chart-btn-group">
                        <!-- Î≥¥Ï°∞ÏßÄÌëú Î≤ÑÌäº -->
                        <button class="ind-popup-btn" id="indPopupBtn" onclick="openIndPopup()">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 3v18h18"/>
                                <path d="M18 9l-5 5-4-4-3 3"/>
                            </svg>
                            <span>ÏßÄÌëú</span>
                        </button>
                        
                        <!-- ÌÉÄÏûÑÌîÑÎ†àÏûÑ Î≤ÑÌäº -->
                        <button class="tf-popup-btn" id="tfPopupBtn" onclick="openTfPopup()">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12 6 12 12 16 14"></polyline>
                            </svg>
                            <span id="tfBtnText">1M</span>
                        </button>
                    </div>
                    
                    <!-- Symbol Dropdown -->
                    <div class="chart-symbol-dropdown" id="chartSymbolDropdown">
                        <div style="padding: 10px 15px; font-size: 11px; color: var(--accent-cyan); border-bottom: 1px solid var(--border-color);">‚≠ê Ï¶êÍ≤®Ï∞æÍ∏∞</div>
                        <div class="chart-symbol-option favorite" data-symbol="BTCUSD" data-name="Bitcoin" data-icon="‚Çø" data-color="#f7931a" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #f7931a;">‚Çø</span>
                            <div><div style="font-weight: bold;">Bitcoin</div><div style="font-size:11px;color:var(--text-muted);">BTCUSD</div></div>
                            <span class="favorite-star">‚≠ê</span>
                        </div>
                        <div class="chart-symbol-option favorite" data-symbol="EURUSD.r" data-name="Euro/Dollar" data-icon="‚Ç¨" data-color="#0052cc" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #0052cc;">‚Ç¨</span>
                            <div><div style="font-weight: bold;">Euro/Dollar</div><div style="font-size:11px;color:var(--text-muted);">EURUSD.r</div></div>
                            <span class="favorite-star">‚≠ê</span>
                        </div>
                        <div class="chart-symbol-option favorite" data-symbol="USDJPY.r" data-name="Dollar/Yen" data-icon="¬•" data-color="#dc143c" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #dc143c;">¬•</span>
                            <div><div style="font-weight: bold;">Dollar/Yen</div><div style="font-size:11px;color:var(--text-muted);">USDJPY.r</div></div>
                            <span class="favorite-star">‚≠ê</span>
                        </div>
                        <div class="chart-symbol-option favorite" data-symbol="XAUUSD.r" data-name="Gold" data-icon="‚ú¶" data-color="#ffd700" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #ffd700;">‚ú¶</span>
                            <div><div style="font-weight: bold;">Gold</div><div style="font-size:11px;color:var(--text-muted);">XAUUSD.r</div></div>
                            <span class="favorite-star">‚≠ê</span>
                        </div>
                        <div class="chart-symbol-option favorite" data-symbol="US100." data-name="NASDAQ" data-icon="‚¨°" data-color="#00b450" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #00b450;">‚¨°</span>
                            <div><div style="font-weight: bold;">NASDAQ</div><div style="font-size:11px;color:var(--text-muted);">US100.</div></div>
                            <span class="favorite-star">‚≠ê</span>
                        </div>
                        <div style="padding: 10px 15px; font-size: 11px; color: var(--text-muted); border-bottom: 1px solid var(--border-color); border-top: 1px solid var(--border-color);">Í∏∞ÌÉÄ Ï¢ÖÎ™©</div>
                        <div class="chart-symbol-option" data-symbol="GBPUSD.r" data-name="Pound/Dollar" data-icon="¬£" data-color="#9c27b0" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #9c27b0;">¬£</span>
                            <div><div style="font-weight: bold;">Pound/Dollar</div><div style="font-size:11px;color:var(--text-muted);">GBPUSD.r</div></div>
                        </div>
                        <div class="chart-symbol-option" data-symbol="ETHUSD" data-name="Ethereum" data-icon="Œû" data-color="#627eea" onclick="selectChartSymbol(this); updateSymbolInfo(this.dataset.symbol);">
                            <span style="font-size: 20px; color: #627eea;">Œû</span>
                            <div><div style="font-weight: bold;">Ethereum</div><div style="font-size:11px;color:var(--text-muted);">ETHUSD</div></div>
                        </div>
                    </div>
                </div>
                
                <!-- Chart -->
                <div id="chart-container"></div>
                
                <!-- Price Bar -->
                <div class="price-bar">
                    <div class="price-box sell">
                        <div class="price-label">SELL (Bid)</div>
                        <div class="price-value" id="chartBid">-</div>
                    </div>
                    <div class="price-box buy">
                        <div class="price-label">BUY (Ask)</div>
                        <div class="price-value" id="chartAsk">-</div>
                    </div>
                </div>
                
                </div><!-- chart-glow-box Îã´Í∏∞ -->
                
                <!-- Signal Section -->
                <div class="chart-signal-section">
                    <div class="chart-signal-title">Technical Analysis</div>
                    
                    <!-- Signal Gauge -->
                    <div class="chart-gauge-container">
                        <svg width="280" height="130" viewBox="0 0 280 130">
                            <path id="chartSellArc" d="" fill="none" stroke="#dc3246" stroke-width="8" stroke-linecap="round"/>
                            <path id="chartBuyArc" d="" fill="none" stroke="#00b450" stroke-width="8" stroke-linecap="round"/>
                            <text x="140" y="14" text-anchor="middle" fill="#9ca3af" font-size="13" font-weight="600">Neutral</text>
                            <text x="40" y="45" text-anchor="middle" fill="#dc3246" font-size="16" font-weight="700">Sell</text>
                            <text x="240" y="45" text-anchor="middle" fill="#00b450" font-size="16" font-weight="700">Buy</text>
                            <text x="5" y="100" text-anchor="start" fill="#6b7280" font-size="11">Strong Sell</text>
                            <text x="275" y="100" text-anchor="end" fill="#6b7280" font-size="11">Strong Buy</text>
                            <line id="chartNeedleShadow" x1="141" y1="101" x2="141" y2="46" stroke="rgba(0,0,0,0.3)" stroke-width="5" stroke-linecap="round"/>
                            <line id="chartGaugeNeedle" x1="140" y1="100" x2="140" y2="45" stroke="#00d4ff" stroke-width="4" stroke-linecap="round"/>
                            <circle cx="140" cy="100" r="12" fill="#0a3040" stroke="#00d4ff" stroke-width="2"/>
                            <circle cx="140" cy="100" r="6" fill="#00d4ff"/>
                        </svg>
                        <div class="chart-gauge-status title-font" id="chartGaugeStatus" style="color: #646473;">Neutral</div>
                    </div>
                    
                    <!-- Indicator Summary -->
                    <div class="chart-indicator-summary">
                        <div class="chart-indicator-item">
                            <div class="chart-indicator-count title-font" id="chartIndSell" style="color: #dc3246; font-family: Orbitron, sans-serif !important;">0</div>
                            <div class="chart-indicator-label">Sell</div>
                        </div>
                        <div class="chart-indicator-item">
                            <div class="chart-indicator-count title-font" id="chartIndNeutral" style="color: #646473; font-family: Orbitron, sans-serif !important;">0</div>
                            <div class="chart-indicator-label">Neutral</div>
                        </div>
                        <div class="chart-indicator-item">
                            <div class="chart-indicator-count title-font" id="chartIndBuy" style="color: #00b450; font-family: Orbitron, sans-serif !important;">0</div>
                            <div class="chart-indicator-label">Buy</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ï¢ÖÎ™© Ï†ïÎ≥¥ ÏÑπÏÖò -->
                <div class="symbol-info-section">
                    <!-- ÏÑπÏÖò Ìó§Îçî -->
                    <div class="info-section-header" onclick="toggleSymbolInfoSection()">
                        <div class="info-section-title">
                            <span class="material-icons-round icon">info</span>
                            <span class="text">Ï¢ÖÎ™© Ï†ïÎ≥¥</span>
                        </div>
                        <span class="material-icons-round info-toggle-icon" id="symbolInfoToggleIcon">expand_more</span>
                    </div>
                    
                    <!-- Ï†ïÎ≥¥ Ïª®ÌÖêÏ∏† -->
                    <div class="symbol-info-content" id="symbolInfoContent">
                        
                        <!-- Ï¢ÖÎ™©Î™Ö Ìó§Îçî -->
                        <div class="symbol-name-header">
                            <span class="symbol-name-icon" id="infoSymbolIcon" style="color: #f7931a;">‚Çø</span>
                            <div class="symbol-name-info">
                                <div class="symbol-name-main" id="infoSymbolName">Bitcoin</div>
                                <div class="symbol-name-sub" id="infoSymbolDesc">Digital Cryptocurrency</div>
                            </div>
                            <div class="info-section-badge" id="infoSymbolId">BTCUSD</div>
                        </div>
                        
                        <!-- Í∏∞Î≥∏ Ï†ïÎ≥¥ Í∑∏Î£π -->
                        <div class="info-group">
                            <div class="info-group-title">Í∏∞Î≥∏ Ï†ïÎ≥¥</div>
                            
                            <div class="info-row">
                                <span class="info-label">Îûè ÏÇ¨Ïù¥Ï¶à</span>
                                <span class="info-value" id="infoLotSize">1 BTC</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">ÏµúÏÜå Í∞ÄÍ≤© Î≥ÄÎèô</span>
                                <span class="info-value" id="infoTickSize">0.01</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">ÏµúÏÜå Í±∞ÎûòÎüâ</span>
                                <span class="info-value" id="infoMinLot">0.01 lot</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">ÏµúÎåÄ Í±∞ÎûòÎüâ</span>
                                <span class="info-value" id="infoMaxLot">100.00 lot</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Ìïç ÏÇ¨Ïù¥Ï¶à</span>
                                <span class="info-value highlight" id="infoPipSize">0.01 (2 digits)</span>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Stop levels</span>
                                <span class="info-value" id="infoStopLevel">0</span>
                            </div>
                        </div>
                        
                        <!-- Ïä§ÌîÑÎ†àÎìú & Ïä§Ïôë Í∑∏Î£π -->
                        <div class="info-group">
                            <div class="info-group-title">Ïä§ÌîÑÎ†àÎìú & Ïä§Ïôë</div>
                            
                            <div class="info-row">
                                <span class="info-label">Î≥ÄÎèô Ïä§ÌîÑÎ†àÎìú</span>
                                <div style="text-align: right;">
                                    <div class="info-value" id="infoSpread">15.00 ‚Ä¢ 0.016%</div>
                                    <div class="info-value-sub" id="infoSpreadPips">150 pips</div>
                                </div>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Ïä§Ïôë Î°±</span>
                                <div style="text-align: right;">
                                    <div class="info-value" id="infoSwapLong">-0.5 ‚Ä¢ -0.0005%</div>
                                    <div class="info-value-sub">Í±∞Îûò Í∑úÎ™®Îãπ 1Ïùº</div>
                                </div>
                            </div>
                            <div class="info-row">
                                <span class="info-label">Ïä§Ïôë Ïàè</span>
                                <div style="text-align: right;">
                                    <div class="info-value" id="infoSwapShort">-0.5 ‚Ä¢ -0.0005%</div>
                                    <div class="info-value-sub">Í±∞Îûò Í∑úÎ™®Îãπ 1Ïùº</div>
                                </div>
                            </div>
                            <div class="info-row">
                                <span class="info-label">3Ïùº Ïä§Ïôë</span>
                                <span class="info-value highlight" id="infoSwap3Day">Wednesday</span>
                            </div>
                        </div>
                        
                        <!-- Í±∞Îûò ÏãúÍ∞Ñ Í∑∏Î£π -->
                        <div class="info-group">
                            <div class="info-group-title">Í±∞Îûò ÏãúÍ∞Ñ</div>
                            
                            <div class="trading-hours-grid" id="tradingHoursGrid">
                                <span class="trading-day">ÏùºÏöîÏùº</span>
                                <span class="trading-time" id="infoHoursSun">23:00 - 23:59</span>
                                
                                <span class="trading-day">ÏõîÏöîÏùº</span>
                                <span class="trading-time" id="infoHoursMon">00:00 - 23:59</span>
                                
                                <span class="trading-day">ÌôîÏöîÏùº</span>
                                <span class="trading-time" id="infoHoursTue">00:00 - 23:59</span>
                                
                                <span class="trading-day">ÏàòÏöîÏùº</span>
                                <span class="trading-time" id="infoHoursWed">00:00 - 23:59</span>
                                
                                <span class="trading-day">Î™©ÏöîÏùº</span>
                                <span class="trading-time" id="infoHoursThu">00:00 - 23:59</span>
                                
                                <span class="trading-day">Í∏àÏöîÏùº</span>
                                <span class="trading-time" id="infoHoursFri">00:00 - 23:59</span>
                                
                                <span class="trading-day">ÌÜ†ÏöîÏùº</span>
                                <span class="trading-time closed" id="infoHoursSat">‚Äî</span>
                            </div>
                        </div>
                        
                    </div>
                </div>
                
                </div><!-- chartDetailContainer Îã´Í∏∞ -->
            </div>
            
            <!-- ========== Trade ÌÉ≠ ========== -->
            <div class="page" id="page-trade">
                
                <!-- Buy/Sell Ìå®ÎÑê (Í∏∞Î≥∏) -->
                <div class="buysell-panel" id="buysellPanel">
                <div class="ea-panel">
                    <!-- EA Header -->
                    <div class="ea-header">
                        <div class="ea-title title-font">FUMA Buy/Sell v3.2</div>
                    </div>
                    
                    <div class="ea-content">
                        <!-- Symbol Row -->
                        <div class="symbol-row">
                            <div class="symbol-info" onclick="toggleSymbolDropdown()">
                                <span class="symbol-icon" id="tradeSymbolIcon" style="color: #f7931a;">‚Çø</span>
                                <div>
                                    <div style="display: flex; align-items: center; gap: 5px;">
                                        <span class="symbol-text" id="tradeSymbolName">Bitcoin</span>
                                        <span style="color: var(--text-muted); font-size: 12px;">‚ñº</span>
                                    </div>
                                    <div style="font-size: 11px; color: var(--text-muted);" id="tradeSymbolId">BTCUSD</div>
                                </div>
                            </div>
                            <button class="settings-btn" onclick="openSettings()">
                                <svg width="20" height="16" viewBox="0 0 20 16" fill="currentColor">
                                    <rect y="0" width="20" height="2" rx="1"/>
                                    <rect y="7" width="20" height="2" rx="1"/>
                                    <rect y="14" width="20" height="2" rx="1"/>
                                </svg>
                            </button>
                        </div>
                        
                        <!-- Symbol Dropdown -->
                        <div class="symbol-dropdown" id="symbolDropdown">
                            <div class="symbol-option selected" data-symbol="BTCUSD" data-name="Bitcoin" data-icon="‚Çø" data-color="#f7931a" onclick="selectSymbol(this)">
                                <span class="symbol-option-icon" style="color: #f7931a;">‚Çø</span>
                                <div><div class="symbol-option-name">Bitcoin</div><div style="font-size:11px;color:var(--text-muted);">BTCUSD</div></div>
                                <span class="symbol-option-check">‚úì</span>
                            </div>
                            <div class="symbol-option" data-symbol="EURUSD.r" data-name="Euro/Dollar" data-icon="‚Ç¨" data-color="#0052cc" onclick="selectSymbol(this)">
                                <span class="symbol-option-icon" style="color: #0052cc;">‚Ç¨</span>
                                <div><div class="symbol-option-name">Euro/Dollar</div><div style="font-size:11px;color:var(--text-muted);">EURUSD.r</div></div>
                                <span class="symbol-option-check" style="display:none;">‚úì</span>
                            </div>
                            <div class="symbol-option" data-symbol="USDJPY.r" data-name="Dollar/Yen" data-icon="¬•" data-color="#dc143c" onclick="selectSymbol(this)">
                                <span class="symbol-option-icon" style="color: #dc143c;">¬•</span>
                                <div><div class="symbol-option-name">Dollar/Yen</div><div style="font-size:11px;color:var(--text-muted);">USDJPY.r</div></div>
                                <span class="symbol-option-check" style="display:none;">‚úì</span>
                            </div>
                            <div class="symbol-option" data-symbol="XAUUSD.r" data-name="Gold" data-icon="‚ú¶" data-color="#ffd700" onclick="selectSymbol(this)">
                                <span class="symbol-option-icon" style="color: #ffd700;">‚ú¶</span>
                                <div><div class="symbol-option-name">Gold</div><div style="font-size:11px;color:var(--text-muted);">XAUUSD.r</div></div>
                                <span class="symbol-option-check" style="display:none;">‚úì</span>
                            </div>
                            <div class="symbol-option" data-symbol="US100." data-name="NASDAQ" data-icon="‚¨°" data-color="#00b450" onclick="selectSymbol(this)">
                                <span class="symbol-option-icon" style="color: #00b450;">‚¨°</span>
                                <div><div class="symbol-option-name">NASDAQ</div><div style="font-size:11px;color:var(--text-muted);">US100.</div></div>
                                <span class="symbol-option-check" style="display:none;">‚úì</span>
                            </div>
                        </div>
                        
                        <!-- Stats Bar -->
                        <div class="stats-bar">
                            <div class="stat-item">
                                <div class="stat-label">Balance</div>
                                <div class="stat-value" id="tradeBalance">$0</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Lot Size</div>
                                <div class="stat-value" id="tradeLotSize">0.01</div>
                            </div>
                            <div class="stat-item">
                                <div class="stat-label">Today</div>
                                <div class="stat-value" id="tradeTodayPL" style="color: var(--buy-color);">+$0</div>
                            </div>
                        </div>
                        
                        <!-- Signal Gauge -->
                        <div class="gauge-container">
                            <svg width="300" height="140" viewBox="0 0 300 140">
                                <path id="sellArc" d="" fill="none" stroke="#dc3246" stroke-width="8" stroke-linecap="round"/>
                                <path id="buyArc" d="" fill="none" stroke="#00b450" stroke-width="8" stroke-linecap="round"/>
                                <text x="150" y="14" text-anchor="middle" fill="#9ca3af" font-size="15" font-weight="600">Neutral</text>
                                <text x="45" y="48" text-anchor="middle" fill="#dc3246" font-size="19" font-weight="700">Sell</text>
                                <text x="255" y="48" text-anchor="middle" fill="#00b450" font-size="19" font-weight="700">Buy</text>
                                <text x="0" y="110" text-anchor="start" fill="#6b7280" font-size="13" font-weight="700">Strong sell</text>
                                <text x="300" y="110" text-anchor="end" fill="#6b7280" font-size="13" font-weight="700">Strong buy</text>
                                <line id="needleShadow" x1="151" y1="111" x2="151" y2="51" stroke="rgba(0,0,0,0.3)" stroke-width="5" stroke-linecap="round"/>
                                <line id="gaugeNeedle" x1="150" y1="110" x2="150" y2="50" stroke="#00d4ff" stroke-width="4" stroke-linecap="round"/>
                                <circle cx="150" cy="110" r="14" fill="#0a3040" stroke="#00d4ff" stroke-width="2"/>
                                <circle cx="150" cy="110" r="8" fill="#00d4ff"/>
                                <circle cx="148" cy="108" r="3" fill="rgba(255,255,255,0.5)"/>
                            </svg>
                            <div class="gauge-status title-font" id="gaugeStatusText" style="color: var(--neutral-color);">Neutral</div>
                        </div>
                        
                        <!-- Indicator Summary -->
                        <div class="indicator-summary">
                            <div class="indicator-item">
                                <div class="indicator-count sell title-font" id="indSell" style="font-family: Orbitron, sans-serif !important;">0</div>
                                <div class="indicator-label">Sell</div>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-count neutral title-font" id="indNeutral" style="font-family: Orbitron, sans-serif !important;">0</div>
                                <div class="indicator-label">Neutral</div>
                            </div>
                            <div class="indicator-item">
                                <div class="indicator-count buy title-font" id="indBuy" style="font-family: Orbitron, sans-serif !important;">0</div>
                                <div class="indicator-label">Buy</div>
                            </div>
                        </div>
                        
                        <!-- Target Section (Ìè¨ÏßÄÏÖò ÏóÜÏùÑ Îïå) -->
                        <div class="target-section" id="targetSection">
                            <!-- ÎßàÌã¥ Î™®Îìú UI -->
                            <div id="martinModeUI" style="display: none;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px;">
                                    <span class="target-label" style="margin: 0;">MARTIN MODE</span>
                                    <span id="martinStepBadge" style="display: none; font-size: 11px; font-weight: bold; padding: 2px 8px; border-radius: 4px; background-color: rgba(220,50,70,0.3); color: #dc3246;"></span>
                                </div>
                                
                                <div class="target-display">
                                    <button class="target-btn" style="opacity: 0.4; cursor: not-allowed;" disabled>‚àí</button>
                                    <div class="target-value title-font" id="martinTargetDisplay">$50</div>
                                    <button class="target-btn" style="opacity: 0.4; cursor: not-allowed;" disabled>+</button>
                                </div>
                                <div class="lot-display" id="martinLotDisplay">0.01 lot</div>
                                
                                <!-- 8Îã®Í≥Ñ ÌëúÏãú Ï†ê -->
                                <div id="martinDotsContainer" style="display: flex; justify-content: center; align-items: center; gap: 6px; padding: 10px 0;"></div>
                                
                                <div id="martinStepInfo" style="text-align: center; font-size: 12px; color: var(--text-muted);">
                                    Step <span id="martinCurrentStep" style="color: var(--accent-cyan);">1</span> / <span id="martinMaxStepsDisplay">7</span> | Target: $<span id="martinTargetInfo">50</span>
                                </div>
                            </div>
                            
                            <!-- Í∏∞Î≥∏/Î¨¥Ï†úÌïú Î™®Îìú UI -->
                            <div id="normalModeUI">
                                <div class="target-label">Profit Target</div>
                                <div class="target-display">
                                    <button class="target-btn" onclick="adjustTarget(-10)">‚àí</button>
                                    <div class="target-value title-font" id="targetValue">$100</div>
                                    <button class="target-btn" onclick="adjustTarget(10)">+</button>
                                </div>
                                <div class="lot-display" id="lotDisplay">0.50 lot (x5)</div>
                                
                                <div class="slider-container">
                                    <input type="range" id="targetSlider" min="0" max="200" value="100" oninput="updateTargetFromSlider(this.value)">
                                    <div class="slider-labels">
                                        <span>$0</span><span>$50</span><span>$100</span><span>$150</span><span>$200</span>
                                    </div>
                                </div>
                                
                                <div class="target-label" style="margin-top: 15px;">Leverage<span style="float:right;color:var(--accent-cyan);font-weight:bold;" id="leverageDisplay">x5</span></div>
                                <div class="slider-container">
                                    <input type="range" id="leverageSlider" min="1" max="20" value="5" oninput="updateLeverageFromSlider(this.value)">
                                    <div class="slider-labels">
                                        <span>x0</span><span>x5</span><span>x10</span><span>x15</span><span>x20</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Position Section (Ìè¨ÏßÄÏÖò ÏûàÏùÑ Îïå) -->
                        <div id="positionSection" style="display: none;">
                            <div class="position-card" id="positionCard">
                                <div class="position-row">
                                    <div class="position-item">
                                        <div class="position-label">Type</div>
                                        <div class="position-value title-font" id="posType" style="color: var(--buy-color);">BUY</div>
                                    </div>
                                    <div class="position-item">
                                        <div class="position-label">Entry</div>
                                        <div class="position-value" id="posEntry">0.00</div>
                                    </div>
                                    <div class="position-item">
                                        <div class="position-label">Time</div>
                                        <div class="position-value title-font" id="posTime">00:00</div>
                                    </div>
                                </div>
                            </div>
                            
                            <!-- P/L Gauge -->
                            <div class="pl-gauge">
                                <div class="pl-labels">
                                    <span style="color: var(--sell-color);">&lt;&lt; LOSE</span>
                                    <span style="color: var(--buy-color);">WIN &gt;&gt;</span>
                                </div>
                                <div class="pl-bar-container">
                                    <div class="pl-bar-center"></div>
                                    <div class="pl-bar-fill" id="plBarFill"></div>
                                    <div class="pl-diamond" id="plDiamond"></div>
                                </div>
                                <div class="pl-bottom">
                                    <span style="font-size: 11px; color: var(--text-muted);" id="plMin">-$100</span>
                                    <span class="pl-percent title-font" id="plPercent" style="color: var(--neutral-color);">0%</span>
                                    <span style="font-size: 11px; color: var(--text-muted);" id="plMax">+$100</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Trade Buttons -->
                        <div id="tradeButtonsNoPos">
                            <div class="trade-buttons">
                                <button class="trade-btn sell-btn title-font" onclick="placeSell()">SELL</button>
                                <button class="trade-btn buy-btn title-font" onclick="placeBuy()">BUY</button>
                            </div>
                        </div>
                        <div id="tradeButtonsHasPos" style="display: none;">
                            <button class="trade-btn close-btn title-font" onclick="closePosition()">CLOSE TRADE</button>
                        </div>
                    </div>
                    
                    <div class="ea-footer">FUMA Buy/Sell ‚Ä¢ v3.2</div>
                </div>
                </div><!-- buysellPanel Îã´Í∏∞ -->
                
                <!-- Quick & Easy Ìå®ÎÑê -->
                <div class="quick-panel" id="quickPanel">
                    <div class="quick-header">
                        <div class="quick-title-bar">
                            <div class="quick-title">‚ö° QUICK & EASY</div>
                        </div>
                        
                        <div class="quick-content">
                            <!-- Í≥ÑÏ¢å Ï†ïÎ≥¥ ÏÉÅÎã® Î∞î -->
                            <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px; margin-bottom: 15px;">
                                <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 10px; text-align: center;">
                                    <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 3px;">Balance</div>
                                    <div id="quickBalance" style="font-size: 13px; font-weight: 700; color: var(--text-primary);">$0</div>
                                </div>
                                <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 10px; text-align: center;">
                                    <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 3px;">Equity</div>
                                    <div id="quickEquity" style="font-size: 13px; font-weight: 700; color: var(--text-primary);">$0</div>
                                </div>
                                <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 10px; text-align: center;">
                                    <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 3px;">Margin</div>
                                    <div id="quickMargin" style="font-size: 13px; font-weight: 700; color: var(--text-primary);">$0</div>
                                </div>
                                <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 10px; text-align: center;">
                                    <div style="font-size: 10px; color: var(--text-muted); margin-bottom: 3px;">Today</div>
                                    <div id="quickTodayPL" style="font-size: 13px; font-weight: 700; color: var(--buy-color);">+$0</div>
                                </div>
                            </div>
                            
                            <!-- Ï¢ÖÎ™© + ÎûèÏàò ÏÑ†ÌÉù -->
                            <div class="quick-section">
                                <div class="quick-section-title">
                                    <span class="material-icons-round">currency_exchange</span>
                                    Ï¢ÖÎ™© & ÎûèÏàò ÏÑ†ÌÉù
                                </div>
                                <div style="display: flex; gap: 10px; align-items: stretch;">
                                    <!-- Ï¢ÖÎ™© ÏÑ†ÌÉù -->
                                    <div style="flex: 1; position: relative;">
                                        <div id="quickSymbolSelector" onclick="toggleQuickSymbolDropdown()" style="display: flex; align-items: center; gap: 10px; padding: 12px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 10px; cursor: pointer; transition: all 0.2s;">
                                            <span id="quickSymbolIcon" style="font-size: 24px; color: #f7931a;">‚Çø</span>
                                            <div style="flex: 1;">
                                                <div id="quickSymbolName" style="font-size: 15px; font-weight: 700;">Bitcoin</div>
                                                <div id="quickSymbolId" style="font-size: 11px; color: var(--text-muted);">BTCUSD</div>
                                            </div>
                                            <span class="material-icons-round" style="color: var(--text-muted); font-size: 20px;">expand_more</span>
                                        </div>
                                        <!-- Ï¢ÖÎ™© ÎìúÎ°≠Îã§Ïö¥ -->
                                        <div id="quickSymbolDropdown" style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--bg-secondary); border: 1px solid var(--accent-cyan); border-radius: 10px; margin-top: 5px; z-index: 60; max-height: 250px; overflow-y: auto;">
                                            <div class="quick-symbol-option" data-symbol="BTCUSD" onclick="selectQuickSymbol('BTCUSD')">
                                                <span style="font-size: 20px; color: #f7931a;">‚Çø</span>
                                                <div><div style="font-weight: 600;">Bitcoin</div><div style="font-size: 11px; color: var(--text-muted);">BTCUSD</div></div>
                                            </div>
                                            <div class="quick-symbol-option" data-symbol="EURUSD.r" onclick="selectQuickSymbol('EURUSD.r')">
                                                <span style="font-size: 20px; color: #0052cc;">‚Ç¨</span>
                                                <div><div style="font-weight: 600;">Euro/Dollar</div><div style="font-size: 11px; color: var(--text-muted);">EURUSD.r</div></div>
                                            </div>
                                            <div class="quick-symbol-option" data-symbol="USDJPY.r" onclick="selectQuickSymbol('USDJPY.r')">
                                                <span style="font-size: 20px; color: #dc143c;">¬•</span>
                                                <div><div style="font-weight: 600;">Dollar/Yen</div><div style="font-size: 11px; color: var(--text-muted);">USDJPY.r</div></div>
                                            </div>
                                            <div class="quick-symbol-option" data-symbol="XAUUSD.r" onclick="selectQuickSymbol('XAUUSD.r')">
                                                <span style="font-size: 20px; color: #ffd700;">‚ú¶</span>
                                                <div><div style="font-weight: 600;">Gold</div><div style="font-size: 11px; color: var(--text-muted);">XAUUSD.r</div></div>
                                            </div>
                                            <div class="quick-symbol-option" data-symbol="US100." onclick="selectQuickSymbol('US100.')">
                                                <span style="font-size: 20px; color: #00b450;">‚¨°</span>
                                                <div><div style="font-weight: 600;">NASDAQ</div><div style="font-size: 11px; color: var(--text-muted);">US100.</div></div>
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <!-- ÎûèÏàò ÏÑ†ÌÉù -->
                                    <div style="width: 110px;">
                                        <div style="display: flex; align-items: center; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 10px; overflow: hidden; height: 100%;">
                                            <button onclick="adjustQuickLot(-0.01)" style="width: 32px; height: 100%; background: transparent; border: none; color: var(--text-muted); font-size: 18px; cursor: pointer;">‚àí</button>
                                            <input type="text" id="quickLotInput" value="0.01" onclick="this.select()" onchange="validateQuickLot(this)" style="flex: 1; background: transparent; border: none; color: var(--text-primary); text-align: center; font-size: 15px; font-weight: 700; width: 100%;">
                                            <button onclick="adjustQuickLot(0.01)" style="width: 32px; height: 100%; background: transparent; border: none; color: var(--text-muted); font-size: 18px; cursor: pointer;">+</button>
                                        </div>
                                        <div style="text-align: center; font-size: 10px; color: var(--text-muted); margin-top: 4px;">LOT</div>
                                    </div>
                                </div>
                                
                                <!-- Ïä§ÌîÑÎ†àÎìú ÌëúÏãú -->
                                <div style="display: flex; justify-content: space-between; margin-top: 10px; padding: 8px 12px; background: rgba(0, 212, 255, 0.1); border-radius: 8px;">
                                    <span style="font-size: 12px; color: var(--text-muted);">Spread</span>
                                    <span id="quickSpreadValue" style="font-size: 12px; font-weight: 600; color: var(--accent-cyan);">$15.00</span>
                                </div>
                            </div>
                            
                            <!-- Ï£ºÎ¨∏ Î≤ÑÌäº -->
                            <div class="quick-section">
                                <div class="quick-section-title">
                                    <span class="material-icons-round">swap_vert</span>
                                    Îπ†Î•∏ Ï£ºÎ¨∏
                                </div>
                                <div class="quick-order-buttons">
                                    <button class="quick-order-btn sell" onclick="quickSell()">
                                        SELL
                                        <span class="quick-order-price" id="quickBidPrice">104,250.50</span>
                                    </button>
                                    <button class="quick-order-btn buy" onclick="quickBuy()">
                                        BUY
                                        <span class="quick-order-price" id="quickAskPrice">104,265.50</span>
                                    </button>
                                </div>
                            </div>
                            
                            <!-- Ï≤≠ÏÇ∞ Î≤ÑÌäº -->
                            <div class="quick-section">
                                <div class="quick-section-title">
                                    <span class="material-icons-round">close</span>
                                    Ï≤≠ÏÇ∞
                                </div>
                                <div class="quick-close-grid">
                                    <button class="quick-close-btn all-close" onclick="quickCloseAll()">
                                        <span class="material-icons-round">close_fullscreen</span>
                                        ÏùºÍ¥ÑÏ≤≠ÏÇ∞
                                    </button>
                                    <button class="quick-close-btn symbol-close" onclick="quickCloseSymbol()">
                                        <span class="material-icons-round">cancel</span>
                                        ÌòÑÏ¢ÖÎ™© Ï≤≠ÏÇ∞
                                    </button>
                                    <button class="quick-close-btn buy-close" onclick="quickCloseBuy()">
                                        <span class="material-icons-round">arrow_upward</span>
                                        Îß§ÏàòÎßå Ï≤≠ÏÇ∞
                                    </button>
                                    <button class="quick-close-btn sell-close" onclick="quickCloseSell()">
                                        <span class="material-icons-round">arrow_downward</span>
                                        Îß§ÎèÑÎßå Ï≤≠ÏÇ∞
                                    </button>
                                    <button class="quick-close-btn profit-close" onclick="quickCloseProfit()">
                                        <span class="material-icons-round">trending_up</span>
                                        ÏàòÏùµÎßå Ï≤≠ÏÇ∞
                                    </button>
                                    <button class="quick-close-btn loss-close" onclick="quickCloseLoss()">
                                        <span class="material-icons-round">trending_down</span>
                                        ÏÜêÏã§Îßå Ï≤≠ÏÇ∞
                                    </button>
                                </div>
                            </div>
                            
                            <!-- SL/TP ÏÑ§Ï†ï -->
                            <div class="quick-section">
                                <div class="quick-section-title">
                                    <span class="material-icons-round">security</span>
                                    SL / TP ÏÑ§Ï†ï
                                </div>
                                <div class="quick-sltp-row">
                                    <span class="quick-sltp-label sl">Stop Loss</span>
                                    <input type="number" class="quick-sltp-input" id="quickSLInput" placeholder="0" value="">
                                    <span class="quick-sltp-unit">pips</span>
                                </div>
                                <div class="quick-sltp-row">
                                    <span class="quick-sltp-label tp">Take Profit</span>
                                    <input type="number" class="quick-sltp-input" id="quickTPInput" placeholder="0" value="">
                                    <span class="quick-sltp-unit">pips</span>
                                </div>
                                <button class="quick-sltp-apply" onclick="applyQuickSLTP()">
                                    <span class="material-icons-round" style="font-size: 16px; vertical-align: middle; margin-right: 5px;">check_circle</span>
                                    SL/TP Ï†ÅÏö©
                                </button>
                            </div>
                            
                            <!-- Ìè¨ÏßÄÏÖò Î¶¨Ïä§Ìä∏ -->
                            <div class="quick-section">
                                <div class="quick-section-title">
                                    <span class="material-icons-round">list_alt</span>
                                    Ìè¨ÏßÄÏÖò Î¶¨Ïä§Ìä∏
                                </div>
                                <div class="quick-position-list" id="quickPositionList">
                                    <div class="quick-position-empty">
                                        <span class="material-icons-round">inbox</span>
                                        <div>Ïó¥Î¶∞ Ìè¨ÏßÄÏÖòÏù¥ ÏóÜÏäµÎãàÎã§</div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="quick-footer">Quick & Easy Panel ‚Ä¢ v1.0</div>
                    </div>
                </div><!-- quickPanel Îã´Í∏∞ -->
                
            </div>
            
            <!-- ========== Account ÌÉ≠ ========== -->
<div class="page" id="page-account">
    <!-- Account Info ÏÑπÏÖò -->
<div class="card">
    <div class="card-title">
        <span class="material-icons-round" style="font-size: 18px; vertical-align: middle; margin-right: 5px;">account_balance</span>
        Account Info
    </div>
    <div class="account-summary-v2">
        <!-- Ï≤´Ïß∏ Ï§Ñ -->
        <div class="summary-box-v2">
            <div class="summary-value" id="accBalance">$0.00</div>
            <div class="summary-label">Balance</div>
        </div>
        <div class="summary-box-v2">
            <div class="summary-value neutral" id="accFree">$0.00</div>
            <div class="summary-label">Margin</div>
        </div>
        <div class="summary-box-v2">
            <div class="summary-value positive" id="accTodayPL">+$0.00</div>
            <div class="summary-label">Today P&L</div>
        </div>
        <!-- ÎëòÏß∏ Ï§Ñ -->
        <div class="summary-box-v2">
            <div class="summary-value neutral" id="accEquity">$0.00</div>
            <div class="summary-label">Equity</div>
        </div>
        <div class="summary-box-v2">
            <div class="summary-value neutral" id="accWinLose">0 / 0</div>
            <div class="summary-label">Win / Lose</div>
        </div>
        <div class="summary-box-v2">
            <div class="summary-value neutral" id="accCurrentPL">$0.00</div>
            <div class="summary-label">Current P&L</div>
        </div>
    </div>
</div>
    
    <!-- Trade History ÏÑπÏÖò -->
    <div class="card">
        <div class="card-title">
            <span class="material-icons-round" style="font-size: 18px; vertical-align: middle; margin-right: 5px;">history</span>
            Trade History
        </div>
        
        <!-- ÌïÑÌÑ∞ Î∞î (All/ÏàòÏùµ/ÏÜêÏã§ + Í∏∞Í∞Ñ ÎìúÎ°≠Îã§Ïö¥) -->
        <div class="history-filter-bar">
            <div class="history-tabs-inline">
                <button class="history-tab-inline active" data-filter="all" onclick="filterHistoryByType('all')">All</button>
                <button class="history-tab-inline" data-filter="profit" onclick="filterHistoryByType('profit')">ÏàòÏùµ</button>
                <button class="history-tab-inline" data-filter="loss" onclick="filterHistoryByType('loss')">ÏÜêÏã§</button>
            </div>
            <div class="period-dropdown-container">
                <button class="period-dropdown-btn" onclick="togglePeriodDropdown()">
    <span id="selectedPeriodText">1Ï£ºÏùº</span>
    <span class="material-icons-round" style="font-size: 18px;">expand_more</span>
</button>
<div class="period-dropdown" id="periodDropdown">
    <div class="period-option" data-period="today" onclick="selectPeriod('today', 'Ïò§Îäò')">Ïò§Îäò</div>
    <div class="period-option active" data-period="week" onclick="selectPeriod('week', '1Ï£ºÏùº')">1Ï£ºÏùº</div>
    <div class="period-option" data-period="month" onclick="selectPeriod('month', '1Í∞úÏõî')">1Í∞úÏõî</div>
    <div class="period-option" data-period="all" onclick="selectPeriod('all', 'Ï†ÑÏ≤¥')">Ï†ÑÏ≤¥</div>
</div>
            </div>
        </div>
        
        <!-- Í∏∞Í∞ÑÎ≥Ñ ÏÑúÎ®∏Î¶¨ -->
<div class="history-summary">
    <div class="history-summary-item">
        <span class="history-summary-label">Win Rate</span>
        <span class="history-summary-value" id="summaryWinRate">0.0%</span>
    </div>
    <div class="history-summary-divider"></div>
    <div class="history-summary-item">
        <span class="history-summary-label">Í±∞ÎûòÎüâ</span>
        <span class="history-summary-value" id="summaryVolume">0.00 lot</span>
    </div>
    <div class="history-summary-divider"></div>
    <div class="history-summary-item">
        <span class="history-summary-label">ÏÜêÏùµ</span>
        <span class="history-summary-value positive" id="summaryPL">+$0.00</span>
    </div>
</div>
        
        <!-- Í±∞Îûò ÎÇ¥Ïó≠ Î¶¨Ïä§Ìä∏ -->
        <div id="historyList">
            <p style="color: var(--text-muted); text-align: center; padding: 20px;">Loading...</p>
        </div>
    </div>
</div>
            
            <!-- ========== My ÌÉ≠ ========== -->
            <div class="page" id="page-my">
                <div class="profile-header">
                    <div class="profile-avatar"><span class="material-icons-round" style="font-size: 48px;">account_circle</span></div>
                    <div class="profile-name" id="profileName">Trader</div>
                    <div class="profile-level">Standard Member</div>
                </div>
                <div class="menu-item"><div class="menu-left"><span class="menu-icon"><span class="material-icons-round">person</span></span><span>My Account</span></div><span class="menu-arrow">‚Ä∫</span></div>
                <div class="menu-item"><div class="menu-left"><span class="menu-icon"><span class="material-icons-round">account_balance</span></span><span>Deposit / Withdraw</span></div><span class="menu-arrow">‚Ä∫</span></div>
                <div class="menu-item"><div class="menu-left"><span class="menu-icon"><span class="material-icons-round">tune</span></span><span>Trading Settings</span></div><span class="menu-arrow">‚Ä∫</span></div>
                <div class="menu-item"><div class="menu-left"><span class="menu-icon"><span class="material-icons-round">security</span></span><span>Security</span></div><span class="menu-arrow">‚Ä∫</span></div>
                <div class="menu-item"><div class="menu-left"><span class="menu-icon"><span class="material-icons-round">help_outline</span></span><span>Help & Support</span></div><span class="menu-arrow">‚Ä∫</span></div>
                <div class="menu-item" onclick="logout()" style="margin-top: 20px; border-color: var(--sell-color);">
                    <div class="menu-left">
                        <span class="menu-icon"><span class="material-icons-round" style="color: var(--sell-color);">logout</span></span>
                        <span style="color: var(--sell-color);">Logout</span>
                    </div>
                    <span class="menu-arrow" style="color: var(--sell-color);">‚Ä∫</span>
                </div>
            </div>
        </div>

        <!-- ÌïòÎã® ÎÑ§ÎπÑÍ≤åÏù¥ÏÖò -->
        <div class="bottom-nav">
            <div class="nav-item active" data-page="home"><span class="nav-icon"><span class="material-icons-round">home</span></span><span class="nav-label">Home</span></div>
            <div class="nav-item" data-page="chart"><span class="nav-icon"><span class="material-icons-round">candlestick_chart</span></span><span class="nav-label">Chart</span></div>
            <div class="nav-item" data-page="trade"><span class="nav-icon"><span class="material-icons-round">swap_vert</span></span><span class="nav-label">Trade</span></div>
            <div class="nav-item" data-page="account"><span class="nav-icon"><span class="material-icons-round">account_balance_wallet</span></span><span class="nav-label">Account</span></div>
            <div class="nav-item" data-page="my"><span class="nav-icon"><span class="material-icons-round">person</span></span><span class="nav-label">My</span></div>
        </div>
        
        <!-- ÎßàÌã¥ ÏÜêÏã§ ÌåùÏóÖ -->
        <div id="martinPopup" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center;">
            <div style="background: var(--bg-secondary); border: 2px solid var(--accent-cyan); border-radius: 12px; padding: 20px; margin: 16px; max-width: 360px; width: 100%;">
                <div style="text-align: center;">
                    <div style="margin-bottom: 12px;">
                        <div style="width: 56px; height: 56px; margin: 0 auto; background: linear-gradient(135deg, #1e3a5f 0%, #0d1f33 100%); border: 2px solid rgba(0,212,255,0.4); border-radius: 12px; display: flex; align-items: center; justify-content: center; box-shadow: 0 0 20px rgba(0,212,255,0.3);">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="none">
                                <path d="M8 22L14 12L20 16L26 8" stroke="#00d4ff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M22 8H26V12" stroke="#00d4ff" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <rect x="6" y="20" width="4" height="6" rx="1" fill="#dc3246" opacity="0.9"/>
                                <rect x="14" y="17" width="4" height="9" rx="1" fill="#ffa500" opacity="0.9"/>
                                <rect x="22" y="14" width="4" height="12" rx="1" fill="#00b450" opacity="0.9"/>
                            </svg>
                        </div>
                    </div>
                    <div style="font-size: 18px; font-weight: bold; color: var(--accent-cyan); margin-bottom: 4px;">
                        Martin Step <span id="popupCurrentStep">1</span> Loss
                    </div>
                    <div style="font-size: 14px; font-weight: bold; color: white; margin-bottom: 16px;">
                        ÎßàÌã¥ <span id="popupCurrentStepKr">1</span>Îã®Í≥Ñ ÏÜêÏã§ Î∞úÏÉù
                    </div>
                    <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 12px; margin-bottom: 16px; text-align: left;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 12px; color: var(--text-muted);">Current Loss / ÌòÑÏû¨ ÏÜêÏã§</span>
                            <span id="popupCurrentLoss" style="font-size: 14px; font-weight: bold; color: #dc3246;">-$0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 12px; color: var(--text-muted);">Accumulated / ÎàÑÏ†Å ÏÜêÏã§</span>
                            <span id="popupAccumulatedLoss" style="font-size: 14px; font-weight: bold; color: #dc3246;">-$0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 12px; color: var(--text-muted);">Next Lot Size / Îã§Ïùå ÎûèÏàò</span>
                            <span id="popupNextLot" style="font-size: 14px; font-weight: bold; color: white;">0.02 lot</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="font-size: 12px; color: var(--text-muted);">Recovery Target / ÌöåÎ≥µ Î™©Ìëú</span>
                            <span id="popupRecoveryTarget" style="font-size: 14px; font-weight: bold; color: #00b450;">+$0</span>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: white; margin-bottom: 4px;">
                        Proceed to next step (<span id="popupNextStep">2</span>)?
                    </div>
                    <div style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px;">
                        Îã§Ïùå Îã®Í≥Ñ (<span id="popupNextStepKr">2</span>Îã®Í≥Ñ)Î°ú ÏßÑÌñâÌïòÏãúÍ≤†ÏäµÎãàÍπå?
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="martinPopupSettings()" style="flex: 1; padding: 10px; border-radius: 8px; font-weight: bold; color: white; background: var(--bg-tertiary); border: 1px solid var(--text-muted); cursor: pointer;">
                            ÏÑ§Ï†ï / Settings
                        </button>
                        <button onclick="martinPopupContinue()" style="flex: 1; padding: 10px; border-radius: 8px; font-weight: bold; color: white; background: #00b450; border: none; cursor: pointer;">
                            Í≥ÑÏÜç / Continue
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ÎßàÌã¥ ÏÑ±Í≥µ ÌåùÏóÖ -->
        <div id="martinSuccessPopup" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center;">
            <div style="background: var(--bg-secondary); border: 2px solid #00b450; border-radius: 12px; padding: 20px; margin: 16px; max-width: 360px; width: 100%;">
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 12px;">üéâ</div>
                    <div style="font-size: 18px; font-weight: bold; color: #00b450; margin-bottom: 4px;">
                        Martin Success!
                    </div>
                    <div style="font-size: 14px; font-weight: bold; color: white; margin-bottom: 16px;">
                        ÎßàÌã¥ Î™®Îìú ÏÑ±Í≥µ!
                    </div>
                    <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 12px; margin-bottom: 16px; text-align: left;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 12px; color: var(--text-muted);">Total Profit / Ï¥ù ÏàòÏùµ</span>
                            <span id="successPopupProfit" style="font-size: 14px; font-weight: bold; color: #00b450;">+$0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="font-size: 12px; color: var(--text-muted);">Recovered Loss / ÌöåÎ≥µ ÏÜêÏã§</span>
                            <span id="successPopupRecovered" style="font-size: 14px; font-weight: bold; color: #00d4ff;">$0</span>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: white; margin-bottom: 4px;">
                        What would you like to do next?
                    </div>
                    <div style="font-size: 13px; color: var(--text-muted); margin-bottom: 16px;">
                        Îã§ÏùåÏóê Î¨¥ÏóáÏùÑ ÌïòÏãúÍ≤†ÏäµÎãàÍπå?
                    </div>
                    <div style="display: flex; gap: 12px;">
                        <button onclick="martinSuccessToSettings()" style="flex: 1; padding: 12px; border-radius: 8px; font-weight: bold; color: white; background: var(--bg-tertiary); border: 1px solid var(--text-muted); cursor: pointer;">
                            ‚öôÔ∏è ÏÑ§Ï†ïÏúºÎ°ú
                        </button>
                        <button onclick="martinSuccessContinue()" style="flex: 1; padding: 12px; border-radius: 8px; font-weight: bold; color: white; background: #00b450; border: none; cursor: pointer;">
                            üîÑ 1Îã®Í≥Ñ ÏãúÏûë
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- ÎßàÌã¥ ÏµúÎåÄ Îã®Í≥Ñ ÎèÑÎã¨ ÌåùÏóÖ -->
        <div id="martinMaxPopup" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 200; align-items: center; justify-content: center;">
            <div style="background: var(--bg-secondary); border: 2px solid #dc3246; border-radius: 12px; padding: 20px; margin: 16px; max-width: 360px; width: 100%;">
                <div style="text-align: center;">
                    <div style="font-size: 48px; margin-bottom: 12px;">‚ö†Ô∏è</div>
                    <div style="font-size: 18px; font-weight: bold; color: #dc3246; margin-bottom: 4px;">
                        Maximum Steps Reached!
                    </div>
                    <div style="font-size: 14px; font-weight: bold; color: white; margin-bottom: 16px;">
                        ÏµúÎåÄ Îã®Í≥ÑÏóê ÎèÑÎã¨ÌñàÏäµÎãàÎã§
                    </div>
                    <div style="background: var(--bg-tertiary); border-radius: 8px; padding: 12px; margin-bottom: 16px; text-align: left;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                            <span style="font-size: 12px; color: var(--text-muted);">Total Loss / Ï¥ù ÏÜêÏã§</span>
                            <span id="maxPopupTotalLoss" style="font-size: 14px; font-weight: bold; color: #dc3246;">-$0</span>
                        </div>
                        <div style="display: flex; justify-content: space-between;">
                            <span style="font-size: 12px; color: var(--text-muted);">Steps Used / ÏÇ¨Ïö© Îã®Í≥Ñ</span>
                            <span id="maxPopupStepsUsed" style="font-size: 14px; font-weight: bold; color: white;">7 / 7</span>
                        </div>
                    </div>
                    <div style="font-size: 14px; color: var(--text-muted); margin-bottom: 16px;">
                        Martin will reset to Step 1.<br>ÎßàÌã¥Ïù¥ 1Îã®Í≥ÑÎ°ú Ï¥àÍ∏∞ÌôîÎê©ÎãàÎã§.
                    </div>
                    <button onclick="closeMaxPopup()" style="width: 100%; padding: 12px; border-radius: 8px; font-weight: bold; color: white; background: #dc3246; border: none; cursor: pointer;">
                        ÌôïÏù∏ / OK
                    </button>
                </div>
            </div>
        </div>
        
        <!-- Ï¢ÖÎ™© Í≤ÄÏÉâ Î™®Îã¨ -->
        <div class="modal-overlay" id="symbolSearchModal">
            <div style="background: var(--bg-secondary); border-radius: 16px; margin: 15px; max-width: 450px; width: 100%; max-height: 80vh; display: flex; flex-direction: column; overflow: hidden;">
                <!-- Í≤ÄÏÉâ Ìó§Îçî -->
                <div style="padding: 15px; border-bottom: 1px solid var(--border-color);">
                    <div style="display: flex; align-items: center; gap: 10px;">
                        <span class="material-icons-round" style="color: var(--text-muted);">search</span>
                        <input type="text" id="symbolSearchInput" placeholder="Ï¢ÖÎ™©Î™Ö ÎòêÎäî Ïã¨Î≥º Í≤ÄÏÉâ..." 
                            style="flex: 1; background: transparent; border: none; color: white; font-size: 16px; outline: none;"
                            oninput="onSymbolSearch(this.value)" autocomplete="off">
                        <button onclick="closeSymbolSearch()" style="background: none; border: none; color: var(--text-muted); font-size: 24px; cursor: pointer;">‚úï</button>
                    </div>
                </div>
                
                <!-- Ïπ¥ÌÖåÍ≥†Î¶¨ ÌïÑÌÑ∞ -->
                <div style="display: flex; gap: 8px; padding: 10px 15px; border-bottom: 1px solid var(--border-color); overflow-x: auto;">
                    <button class="search-category-btn active" data-category="all" onclick="filterSearchCategory('all')">Ï†ÑÏ≤¥</button>
                    <button class="search-category-btn" data-category="forex" onclick="filterSearchCategory('forex')">Forex</button>
                    <button class="search-category-btn" data-category="crypto" onclick="filterSearchCategory('crypto')">Crypto</button>
                    <button class="search-category-btn" data-category="indices" onclick="filterSearchCategory('indices')">Indices</button>
                    <button class="search-category-btn" data-category="metals" onclick="filterSearchCategory('metals')">Metals</button>
                </div>
                
                <!-- Í≤ÄÏÉâ Í≤∞Í≥º -->
                <div id="symbolSearchResults" style="flex: 1; overflow-y: auto; padding: 10px 0;">
                    <div style="text-align: center; padding: 40px 20px; color: var(--text-muted);">
                        <span class="material-icons-round" style="font-size: 48px; opacity: 0.5;">search</span>
                        <p style="margin-top: 10px;">Ï¢ÖÎ™©Î™Ö ÎòêÎäî Ïã¨Î≥ºÏùÑ ÏûÖÎ†•ÌïòÏÑ∏Ïöî</p>
                    </div>
                </div>
                
                <!-- Î°úÎî© ÌëúÏãú -->
                <div id="symbolSearchLoading" style="display: none; text-align: center; padding: 20px;">
                    <div style="color: var(--accent-cyan);">Í≤ÄÏÉâ Ï§ë...</div>
                </div>
            </div>
        </div>
        
        <!-- Toast -->
        <div class="toast" id="toast"></div>
        
        <!-- Í≤åÏä§Ìä∏ Î™®Îìú Í∞ÄÏûÖ Ïú†ÎèÑ ÌåùÏóÖ -->
        <div class="modal-overlay" id="guestPopup">
            <div style="background: linear-gradient(180deg, #1e2127 0%, #15171c 100%); border: 2px solid #00d4ff; border-radius: 16px; padding: 30px 25px; margin: 20px; max-width: 360px; width: 100%; text-align: center; box-shadow: 0 0 60px rgba(0,212,255,0.3);">
                <div style="font-size: 50px; margin-bottom: 15px;">üöÄ</div>
                <div style="font-size: 22px; font-weight: bold; color: #00d4ff; margin-bottom: 8px; letter-spacing: 1px;">Ready to Trade?</div>
                <div style="font-size: 15px; color: #9ca3af; margin-bottom: 25px; line-height: 1.6;">
                    Ïã§Ï†ú Í±∞ÎûòÎ•º ÏãúÏûëÌïòÎ†§Î©¥<br>Í≥ÑÏ†ïÏù¥ ÌïÑÏöîÌï©ÎãàÎã§
                </div>
                <div style="display: flex; gap: 12px; margin-bottom: 15px;">
                    <button onclick="goToRegister()" style="flex: 1; padding: 14px; font-size: 15px; font-weight: bold; background: linear-gradient(135deg, #00d4ff 0%, #0099cc 100%); border: none; border-radius: 10px; color: #000; cursor: pointer;">
                        ÌöåÏõêÍ∞ÄÏûÖ
                    </button>
                    <button onclick="goToLoginPage()" style="flex: 1; padding: 14px; font-size: 15px; font-weight: bold; background: transparent; border: 2px solid #00d4ff; border-radius: 10px; color: #00d4ff; cursor: pointer;">
                        Î°úÍ∑∏Ïù∏
                    </button>
                </div>
                <button onclick="closeGuestPopup()" style="padding: 10px 30px; font-size: 13px; background: transparent; border: none; color: #6b7280; cursor: pointer;">
                    Í≥ÑÏÜç ÎëòÎü¨Î≥¥Í∏∞
                </button>
            </div>
        </div>
        
        <!-- MT5 Ïó∞Í≤∞ Î™®Îã¨ -->
        <div class="modal-overlay" id="mt5ConnectModal">
            <div style="background: linear-gradient(180deg, #1e2127 0%, #15171c 100%); border: 2px solid var(--accent-cyan); border-radius: 16px; padding: 0; margin: 15px; max-width: 420px; width: 100%; box-shadow: 0 0 60px rgba(0,212,255,0.2); overflow: hidden;">
                <!-- Ìó§Îçî -->
                <div style="background: #000; padding: 15px 18px; display: flex; justify-content: space-between; align-items: center;">
                    <div style="display: flex; align-items: center; gap: 9px;">
                        <span class="material-icons-round" style="color: var(--accent-cyan); font-size: 26px;">link</span>
                        <span style="font-size: 18px; font-weight: bold;">MT5 Í≥ÑÏ¢å Ïó∞Í≤∞</span>
                    </div>
                    <button onclick="closeMT5ConnectModal()" style="background: none; border: none; color: var(--text-muted); font-size: 24px; cursor: pointer;">‚úï</button>
                </div>
                
                <!-- ÏÑ†ÌÉù ÌôîÎ©¥ -->
                <div id="mt5Step1" style="padding: 20px;">
                    <div style="text-align: center; margin-bottom: 20px;">
                        <div style="font-size: 15px; color: var(--text-muted);">Í≥ÑÏ¢å Î≥¥Ïú† Ïó¨Î∂ÄÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</div>
                    </div>
                    
                    <div style="display: flex; flex-direction: column; gap: 10px;">
                        <button onclick="showMT5Step2('existing')" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 10px; cursor: pointer; transition: all 0.2s; text-align: left;">
                            <span class="material-icons-round" style="font-size: 28px; color: var(--accent-cyan);">account_circle</span>
                            <div style="flex: 1;">
                                <div style="font-size: 15px; font-weight: 600; color: white;">Ïù¥ÎØ∏ HedgeHood Í≥ÑÏ¢åÍ∞Ä ÏûàÏäµÎãàÎã§</div>
                                <div style="font-size: 13px; color: var(--text-muted);">Í∏∞Ï°¥ Í≥ÑÏ¢å Ïó∞Í≤∞ÌïòÍ∏∞</div>
                            </div>
                            <span class="material-icons-round" style="margin-left: auto; color: var(--text-muted);">chevron_right</span>
                        </button>
                        
                        <button onclick="showMT5Step2('new')" style="display: flex; align-items: center; gap: 12px; padding: 14px 16px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 10px; cursor: pointer; transition: all 0.2s; text-align: left;">
                            <span class="material-icons-round" style="font-size: 28px; color: var(--buy-color);">person_add</span>
                            <div style="flex: 1;">
                                <div style="font-size: 15px; font-weight: 600; color: white;">Ïã†Í∑úÎ°ú Í≥ÑÏ¢åÎ•º Í∞úÏÑ§ÌïòÍ≥† Ïã∂ÏäµÎãàÎã§</div>
                                <div style="font-size: 13px; color: var(--text-muted);">HedgeHood Í∞ÄÏûÖ ÏïàÎÇ¥</div>
                            </div>
                            <span class="material-icons-round" style="margin-left: auto; color: var(--text-muted);">chevron_right</span>
                        </button>
                    </div>
                </div>
                
                <!-- Í∏∞Ï°¥ Í≥ÑÏ¢å Ïó∞Í≤∞ Ìèº -->
                <div id="mt5Step2Existing" style="display: none; padding: 18px 20px;">
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-size: 14px; color: white; margin-bottom: 6px;">Server (ÏÑúÎ≤Ñ)</label>
                        <select id="mt5Server" style="width: 100%; padding: 11px 12px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 15px;">
                            <option value="HedgeHood-MT5" selected>HedgeHood-MT5</option>
                            <option value="HedgeHood-Live">HedgeHood-Live</option>
                            <option value="HedgeHood-Demo">HedgeHood-Demo</option>
                        </select>
                        <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px; display: flex; align-items: center; gap: 4px;">
                            <span class="material-icons-round" style="font-size: 16px;">info</span>
                            MT5 ÏÉÅÎã® ÌÉÄÏù¥ÌãÄÎ∞îÏóêÏÑú ÌôïÏù∏ Í∞ÄÎä•
                        </div>
                    </div>
                    
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-size: 14px; color: white; margin-bottom: 6px;">Account Number (Í≥ÑÏ¢åÎ≤àÌò∏)</label>
                        <input type="text" id="mt5AccountNumber" placeholder="Ïòà: 930000024" style="width: 100%; padding: 11px 12px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 15px;">
                    </div>
                    
                    <div style="margin-bottom: 16px;">
                        <label style="display: block; font-size: 14px; color: white; margin-bottom: 6px;">Password (Í±∞ÎûòÍ≥ÑÏ¢å ÏïîÌò∏)</label>
                        <input type="password" id="mt5Password" placeholder="Í±∞ÎûòÍ≥ÑÏ¢å ÏïîÌò∏ ÏûÖÎ†•" style="width: 100%; padding: 11px 12px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 8px; color: white; font-size: 15px;">
                        <div style="font-size: 12px; color: var(--text-muted); margin-top: 4px; display: flex; align-items: center; gap: 4px;">
                            <span class="material-icons-round" style="font-size: 16px;">warning</span>
                            MT5 Î°úÍ∑∏Ïù∏ Ïãú ÏÇ¨Ïö©ÌïòÎäî ÏïîÌò∏Î•º ÏûÖÎ†•ÌïòÏÑ∏Ïöî
                        </div>
                    </div>
                    
                    <div style="display: flex; gap: 12px;">
                        <button onclick="showMT5Step1()" style="flex: 1; padding: 16px; background: var(--bg-tertiary); border: 1px solid var(--border-color); border-radius: 10px; color: white; font-size: 15px; font-weight: 600; cursor: pointer;">
                            Ïù¥Ï†Ñ
                        </button>
                        <button onclick="connectMT5Account()" style="flex: 2; padding: 16px; background: linear-gradient(135deg, var(--accent-cyan) 0%, #0099cc 100%); border: none; border-radius: 10px; color: #000; font-size: 15px; font-weight: 700; cursor: pointer;">
                            Ïó∞Í≤∞ÌïòÍ∏∞
                        </button>
                    </div>
                </div>
                
                <!-- Ïã†Í∑ú Í≥ÑÏ¢å Í∞úÏÑ§ ÏïàÎÇ¥ -->
                <div id="mt5Step2New" style="display: none; padding: 25px;">
                    <div style="text-align: center; margin-bottom: 25px;">
                        <div style="width: 70px; height: 70px; margin: 0 auto 15px; background: linear-gradient(135deg, rgba(0, 180, 80, 0.2) 0%, rgba(0, 180, 80, 0.05) 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                            <span class="material-icons-round" style="font-size: 36px; color: var(--buy-color);">rocket_launch</span>
                        </div>
                        <div style="font-size: 18px; font-weight: 600; color: white; margin-bottom: 5px;">HedgeHood Í≥ÑÏ¢å Í∞úÏÑ§</div>
                        <div style="font-size: 14px; color: var(--text-muted);">Í∞ÑÎã®Ìïú Ï†àÏ∞®Î°ú Í±∞ÎûòÎ•º ÏãúÏûëÌïòÏÑ∏Ïöî</div>
                    </div>
                    
                    <div style="background: var(--bg-tertiary); border-radius: 12px; padding: 18px; margin-bottom: 22px;">
                        <div style="display: flex; align-items: flex-start; gap: 14px; margin-bottom: 16px;">
                            <div style="width: 28px; height: 28px; background: var(--accent-cyan); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; color: #000; flex-shrink: 0;">1</div>
                            <div>
                                <div style="font-size: 15px; font-weight: 600; color: white;">HedgeHood ÌôàÌéòÏù¥ÏßÄ Ï†ëÏÜç</div>
                                <div style="font-size: 13px; color: var(--text-muted);">hedgehood.com</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 14px; margin-bottom: 16px;">
                            <div style="width: 28px; height: 28px; background: var(--accent-cyan); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; color: #000; flex-shrink: 0;">2</div>
                            <div>
                                <div style="font-size: 15px; font-weight: 600; color: white;">ÌöåÏõêÍ∞ÄÏûÖ Î∞è Î≥∏Ïù∏Ïù∏Ï¶ù</div>
                                <div style="font-size: 13px; color: var(--text-muted);">Ïù¥Î©îÏùº, Ïã†Î∂ÑÏ¶ù Ïù∏Ï¶ù</div>
                            </div>
                        </div>
                        <div style="display: flex; align-items: flex-start; gap: 14px;">
                            <div style="width: 28px; height: 28px; background: var(--accent-cyan); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-size: 14px; font-weight: bold; color: #000; flex-shrink: 0;">3</div>
                            <div>
                                <div style="font-size: 15px; font-weight: 600; color: white;">Í≥ÑÏ¢å Í∞úÏÑ§ Ïã†Ï≤≠</div>
                                <div style="font-size: 13px; color: var(--text-muted);">ÏïΩ 5~10Î∂Ñ ÏÜåÏöî</div>
                            </div>
                        </div>
                    </div>
                    
                    <a href="https://hedgehood.com" target="_blank" style="display: flex; align-items: center; justify-content: center; gap: 8px; width: 100%; padding: 16px; background: linear-gradient(135deg, var(--buy-color) 0%, #008040 100%); border: none; border-radius: 10px; color: white; font-size: 15px; font-weight: 700; cursor: pointer; text-decoration: none; margin-bottom: 15px;">
                        <span class="material-icons-round" style="font-size: 20px;">open_in_new</span>
                        HedgeHood.com Î∞îÎ°úÍ∞ÄÍ∏∞
                    </a>
                    
                    <div style="text-align: center; font-size: 13px; color: var(--text-muted); padding: 12px; background: rgba(0, 212, 255, 0.1); border-radius: 10px;">
                        <span class="material-icons-round" style="font-size: 16px; vertical-align: middle;">lightbulb</span>
                        Í≥ÑÏ¢å Í∞úÏÑ§ ÌõÑ Ïù¥ ÌôîÎ©¥ÏóêÏÑú MT5 Í≥ÑÏ¢åÎ•º Ïó∞Í≤∞ÌïòÏÑ∏Ïöî!
                    </div>
                    
                    <button onclick="showMT5Step1()" style="width: 100%; margin-top: 18px; padding: 14px; background: transparent; border: 1px solid var(--border-color); border-radius: 10px; color: var(--text-muted); font-size: 15px; font-weight: 600; cursor: pointer;">
                        Ïù¥Ï†ÑÏúºÎ°ú
                    </button>
                </div>
            </div>
        </div>

        <!-- MT5 Ïó∞Í≤∞ ÏÑ±Í≥µ Î™®Îã¨ -->
        <div class="modal-overlay" id="mt5SuccessModal">
            <div style="background: linear-gradient(180deg, #1e2127 0%, #15171c 100%); border: 2px solid var(--buy-color); border-radius: 16px; padding: 25px; margin: 20px; max-width: 340px; width: 100%; text-align: center; box-shadow: 0 0 60px rgba(0, 180, 80, 0.3);">
                <div style="width: 70px; height: 70px; margin: 0 auto 15px; background: linear-gradient(135deg, rgba(0, 180, 80, 0.2) 0%, rgba(0, 180, 80, 0.05) 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                    <span class="material-icons-round" style="font-size: 36px; color: var(--buy-color);">check_circle</span>
                </div>
                <div style="font-size: 18px; font-weight: bold; color: var(--buy-color); margin-bottom: 5px;">Ïó∞Í≤∞ ÏôÑÎ£å!</div>
                <div style="font-size: 13px; color: var(--text-muted); margin-bottom: 20px;">MT5 Í≥ÑÏ¢åÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Ïó∞Í≤∞ÎêòÏóàÏäµÎãàÎã§</div>
                
                <div style="background: var(--bg-tertiary); border-radius: 10px; padding: 15px; margin-bottom: 20px; text-align: left;">
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-color);"><span style="color: var(--text-muted); font-size: 13px;">Broker</span><span style="font-weight: 600; font-size: 13px;" id="successBroker">HedgeHood</span></div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-color);"><span style="color: var(--text-muted); font-size: 13px;">Account</span><span style="font-weight: 600; font-size: 13px;" id="successAccount">-</span></div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0; border-bottom: 1px solid var(--border-color);"><span style="color: var(--text-muted); font-size: 13px;">Server</span><span style="font-weight: 600; font-size: 13px;" id="successServer">-</span></div>
                    <div style="display: flex; justify-content: space-between; padding: 8px 0;"><span style="color: var(--text-muted); font-size: 13px;">Leverage</span><span style="font-weight: 600; font-size: 13px;" id="successLeverage">1:500</span></div>
                </div>
                
                <div style="font-size: 13px; color: var(--accent-cyan); margin-bottom: 15px;">üíé Ïù¥Ï†ú Live Í±∞ÎûòÎ•º ÏãúÏûëÌïòÏÑ∏Ïöî!</div>
                
                <button onclick="closeMT5SuccessModal()" style="width: 100%; padding: 14px; background: linear-gradient(135deg, var(--buy-color) 0%, #008040 100%); border: none; border-radius: 10px; color: white; font-weight: 700; cursor: pointer;">
                    ÌôïÏù∏
                </button>
            </div>
        </div>

        <!-- Settings Modal -->
        <div class="modal-overlay" id="settingsModal">
            <div class="settings-panel">
                <div class="settings-header">
                    <div style="display: flex; align-items: center; gap: 8px;">
                        <span>‚öôÔ∏è</span>
                        <span class="settings-title">Trading Settings</span>
                    </div>
                    <button class="settings-close" onclick="closeSettings()">‚úï</button>
                </div>
                
                <div class="settings-content">
                    <!-- Strategy Mode -->
                    <div class="settings-section">
                        <div class="settings-label">STRATEGY MODE</div>
                        
                        <div class="mode-option selected" data-mode="basic" onclick="selectMode(this)">
                            <div class="mode-option-header">
                                <span class="mode-radio">‚óè</span>
                                <span class="mode-name" style="width: 80px;">Basic</span>
                                <span class="mode-desc">- Safe & Steady</span>
                            </div>
                        </div>
                        
                        <div class="mode-option" data-mode="noLimit" onclick="selectMode(this)">
                            <div class="mode-option-header">
                                <span class="mode-radio">‚óã</span>
                                <span class="mode-name" style="width: 80px;">No Limit</span>
                                <span class="mode-desc">- Up to 50%</span>
                            </div>
                        </div>
                        
                        <div class="mode-option" data-mode="martin" onclick="selectMode(this)">
                            <div class="mode-option-header">
                                <span class="mode-radio">‚óã</span>
                                <span class="mode-name" style="width: 80px;">Martin</span>
                                <span class="mode-desc">- High Risk</span>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Trading Settings -->
                    <div class="settings-section">
                        <div class="settings-label">TRADING SETTINGS</div>
                        
                        <!-- Symbol Selector -->
                        <div style="margin-bottom: 12px;">
                            <div style="font-size: 12px; color: white; margin-bottom: 6px;">Select Symbol</div>
                            <div style="position: relative;">
                                <div id="settingsSymbolBtn" style="padding: 10px 12px; background: var(--bg-secondary); border: 1px solid var(--border-color); border-radius: 6px; cursor: pointer; display: flex; justify-content: space-between; align-items: center;" onclick="toggleSettingsSymbol()">
                                    <span id="settingsSymbolText" style="font-weight: bold;">BTCUSD</span>
                                    <span>‚ñº</span>
                                </div>
                                <div id="settingsSymbolDropdown" style="display: none; position: absolute; top: 100%; left: 0; right: 0; background: var(--bg-secondary); border: 1px solid var(--accent-cyan); border-radius: 6px; margin-top: 4px; z-index: 10;">
                                    <div style="padding: 10px 12px; cursor: pointer;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background=''" onclick="setSettingsSymbol('BTCUSD')">BTCUSD</div>
                                    <div style="padding: 10px 12px; cursor: pointer;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background=''" onclick="setSettingsSymbol('EURUSD.r')">EURUSD.r</div>
                                    <div style="padding: 10px 12px; cursor: pointer;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background=''" onclick="setSettingsSymbol('USDJPY.r')">USDJPY.r</div>
                                    <div style="padding: 10px 12px; cursor: pointer;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background=''" onclick="setSettingsSymbol('XAUUSD.r')">XAUUSD.r</div>
                                    <div style="padding: 10px 12px; cursor: pointer;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background=''" onclick="setSettingsSymbol('US100.')">US100.</div>
                                </div>
                            </div>
                            <div style="font-size: 10px; color: var(--text-muted); margin-top: 4px;" id="settingsSymbolDesc">Bitcoin | Spread: ~$11</div>
                        </div>
                        
                        <!-- Profit Target -->
                        <div class="input-row">
                            <div>
                                <span class="input-label">Profit Target</span>
                                <span class="input-hint" id="targetHint">(Range: $10 ~ $200)</span>
                            </div>
                            <div class="input-controls">
                                <button class="input-btn" onclick="adjustSettingsTarget(-10)">‚ñº</button>
                                <div class="input-value" id="settingsTargetValue">$100</div>
                                <button class="input-btn" onclick="adjustSettingsTarget(10)">‚ñ≤</button>
                            </div>
                        </div>
                        
                        <!-- Leverage / Lot Size -->
                        <div class="input-row">
                            <div>
                                <span class="input-label" id="leverageLotLabel">Leverage</span>
                                <span class="input-hint" id="leverageLotHint">(Range: x1 ~ x20)</span>
                            </div>
                            <div class="input-controls">
                                <button class="input-btn" onclick="adjustSettingsLeverage(-1)">‚ñº</button>
                                <input type="text" class="input-value" id="settingsLeverageValue" value="x5" 
                                onclick="this.select();" 
                                onchange="updateSettingsLeverageFromInput(this.value);"
                                style="cursor: text;">
                                <button class="input-btn" onclick="adjustSettingsLeverage(1)">‚ñ≤</button>
                            </div>
                        </div>
                        
                        <div class="settings-divider"></div>
                        
                        <!-- Martin Level -->
                        <div class="input-row" id="martinLevelRow" style="opacity: 0.4;">
                            <div class="martin-row">
                                <input type="checkbox" class="martin-checkbox" id="martinCheckbox" disabled onchange="toggleMartinLevel()">
                                <span class="input-label">Martin Level</span>
                                <span class="input-hint">(Step: ~ 20)</span>
                            </div>
                            <div class="input-controls">
                                <button class="input-btn" id="martinDownBtn" disabled onclick="adjustMartinLevel(-1)">‚ñº</button>
                                <div class="input-value" id="martinLevelValue">3</div>
                                <button class="input-btn" id="martinUpBtn" disabled onclick="adjustMartinLevel(1)">‚ñ≤</button>
                            </div>
                        </div>
                        
                        <div class="martin-max" id="martinMaxInfo" style="display: none;">
                            <span>Available</span>
                            <button class="martin-max-btn" onclick="setMartinMax()">Max</button>
                            <span>: Step [<span id="martinMaxStep">7</span>] | Required [<span id="martinRequired">$12,700+</span>]</span>
                        </div>
                        
                        <div class="martin-info">Martin Level: Max recovery steps for Martingale mode</div>
                    </div>
                </div>
                
                <div class="settings-footer">
                    <button class="settings-footer-btn apply" onclick="applySettings()">Apply</button>
                    <button class="settings-footer-btn reset" onclick="resetSettings()">Reset</button>
                </div>
            </div>
        </div>
        
        <!-- Ï∞®Ìä∏ ÏÑúÎ∏åÎ©îÎâ¥ (Î∞îÌÖÄÏãúÌä∏) - New Design -->
<div class="submenu-overlay" id="chartSubmenuOverlay" onclick="closeChartSubmenu()">
    <div class="submenu-sheet" onclick="event.stopPropagation()">
        <div class="submenu-handle"></div>
        <div class="submenu-title">Chart</div>
        
        <div class="submenu-items">
            <!-- Ï¢ÖÎ™© Î™©Î°ù -->
            <div class="submenu-item" 
                 onclick="selectSubmenuItem('watchlist')"
                 onmousedown="submenuItemPressStart('watchlist', this)"
                 onmouseup="submenuItemPressEnd()"
                 onmouseleave="submenuItemPressEnd()"
                 ontouchstart="submenuItemPressStart('watchlist', this)"
                 ontouchend="submenuItemPressEnd()"
                 ontouchcancel="submenuItemPressEnd()">
                <div class="submenu-item-left">
                    <div class="submenu-item-icon cyan">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M4 6h16M4 10h16M4 14h16M4 18h16" />
                        </svg>
                    </div>
                    <div class="submenu-item-content">
                        <div class="submenu-item-title">Ï¢ÖÎ™© Î™©Î°ù</div>
                        <div class="submenu-item-subtitle">Watchlist</div>
                    </div>
                </div>
                <div class="submenu-item-badge" id="submenuWatchlistBadge" style="display: none;">Í∏∞Î≥∏</div>
                <svg class="submenu-item-arrow" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
                <div class="submenu-item-progress"></div>
            </div>
            
            <!-- Ï∞®Ìä∏ Î≥¥Í∏∞ -->
            <div class="submenu-item" 
                 onclick="selectSubmenuItem('chart')"
                 onmousedown="submenuItemPressStart('chart', this)"
                 onmouseup="submenuItemPressEnd()"
                 onmouseleave="submenuItemPressEnd()"
                 ontouchstart="submenuItemPressStart('chart', this)"
                 ontouchend="submenuItemPressEnd()"
                 ontouchcancel="submenuItemPressEnd()">
                <div class="submenu-item-left">
                    <div class="submenu-item-icon emerald">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4v16" />
                        </svg>
                    </div>
                    <div class="submenu-item-content">
                        <div class="submenu-item-title">Ï∞®Ìä∏ Î≥¥Í∏∞</div>
                        <div class="submenu-item-subtitle">Chart View</div>
                    </div>
                </div>
                <div class="submenu-item-badge" id="submenuChartBadge" style="display: none;">Í∏∞Î≥∏</div>
                <svg class="submenu-item-arrow" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
                <div class="submenu-item-progress"></div>
            </div>
        </div>
        
        <div class="submenu-hint">
            <p>üí° Í∏∏Í≤å ÎàÑÎ•¥Î©¥ Í∏∞Î≥∏ ÌôîÎ©¥ÏúºÎ°ú Îì±Î°ùÎê©ÎãàÎã§</p>
        </div>
    </div>
</div>

<!-- ÏÑúÎ∏åÎ©îÎâ¥ Îì±Î°ù ÌÜ†Ïä§Ìä∏ -->
<div class="submenu-toast" id="submenuToast">
    <div class="submenu-toast-icon">‚úÖ</div>
    <div class="submenu-toast-title">"<span id="submenuToastViewName">Ï∞®Ìä∏ Î≥¥Í∏∞</span>" Îì±Î°ù ÏôÑÎ£å!</div>
    <div class="submenu-toast-desc">ÏïûÏúºÎ°ú Ìï¥Îãπ ÌÉ≠ÏùÑ Í∏∏Í≤å ÎàÑÎ•¥Î©¥<br>Î∞îÎ°ú Ïù¥ÎèôÌï©ÎãàÎã§ üöÄ</div>
</div>

<!-- Trade ÏÑúÎ∏åÎ©îÎâ¥ (Î∞îÌÖÄÏãúÌä∏) - New Design -->
<div class="submenu-overlay" id="tradeSubmenuOverlay" onclick="closeTradeSubmenu()">
    <div class="submenu-sheet" onclick="event.stopPropagation()">
        <div class="submenu-handle"></div>
        <div class="submenu-title">Trade</div>
        
        <div class="submenu-items">
            <!-- Buy/Sell Ìå®ÎÑê -->
            <div class="submenu-item" 
                 onclick="selectTradeSubmenuItem('buysell')"
                 onmousedown="tradeSubmenuItemPressStart('buysell', this)"
                 onmouseup="tradeSubmenuItemPressEnd()"
                 onmouseleave="tradeSubmenuItemPressEnd()"
                 ontouchstart="tradeSubmenuItemPressStart('buysell', this)"
                 ontouchend="tradeSubmenuItemPressEnd()"
                 ontouchcancel="tradeSubmenuItemPressEnd()">
                <div class="submenu-item-left">
                    <div class="submenu-item-icon cyan">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                        </svg>
                    </div>
                    <div class="submenu-item-content">
                        <div class="submenu-item-title">Buy/Sell Ìå®ÎÑê</div>
                        <div class="submenu-item-subtitle">Binary Mode</div>
                    </div>
                </div>
                <div class="submenu-item-badge" id="submenuBuysellBadge" style="display: none;">Í∏∞Î≥∏</div>
                <svg class="submenu-item-arrow" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
                <div class="submenu-item-progress"></div>
            </div>
            
            <!-- Quick & Easy Ìå®ÎÑê -->
            <div class="submenu-item" 
                 onclick="selectTradeSubmenuItem('quick')"
                 onmousedown="tradeSubmenuItemPressStart('quick', this)"
                 onmouseup="tradeSubmenuItemPressEnd()"
                 onmouseleave="tradeSubmenuItemPressEnd()"
                 ontouchstart="tradeSubmenuItemPressStart('quick', this)"
                 ontouchend="tradeSubmenuItemPressEnd()"
                 ontouchcancel="tradeSubmenuItemPressEnd()">
                <div class="submenu-item-left">
                    <div class="submenu-item-icon emerald">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M13 10V3L4 14h7v7l9-11h-7z" />
                        </svg>
                    </div>
                    <div class="submenu-item-content">
                        <div class="submenu-item-title">Multi Order Ìå®ÎÑê</div>
                        <div class="submenu-item-subtitle">Multiple Mode</div>
                    </div>
                </div>
                <div class="submenu-item-badge" id="submenuQuickBadge" style="display: none;">Í∏∞Î≥∏</div>
                <svg class="submenu-item-arrow" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
                <div class="submenu-item-progress"></div>
            </div>
            
            <!-- Multi Order Ìå®ÎÑê -->
            <div class="submenu-item" 
                 onclick="selectTradeSubmenuItem('multi')"
                 onmousedown="tradeSubmenuItemPressStart('multi', this)"
                 onmouseup="tradeSubmenuItemPressEnd()"
                 onmouseleave="tradeSubmenuItemPressEnd()"
                 ontouchstart="tradeSubmenuItemPressStart('multi', this)"
                 ontouchend="tradeSubmenuItemPressEnd()"
                 ontouchcancel="tradeSubmenuItemPressEnd()">
                <div class="submenu-item-left">
                    <div class="submenu-item-icon" style="background: rgba(168, 85, 247, 0.12); color: #a855f7;">
                        <svg fill="none" stroke="currentColor" viewBox="0 0 24 24" width="22" height="22">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />
                        </svg>
                    </div>
                    <div class="submenu-item-content">
                        <div class="submenu-item-title">Quick & Easy Ìå®ÎÑê</div>
                        <div class="submenu-item-subtitle">Easy Mode</div>
                    </div>
                </div>
                <div class="submenu-item-badge" id="submenuMultiBadge" style="display: none;">Í∏∞Î≥∏</div>
                <svg class="submenu-item-arrow" width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
                </svg>
                <div class="submenu-item-progress"></div>
            </div>
        </div>
        
        <div class="submenu-hint">
            <p>üí° Í∏∏Í≤å ÎàÑÎ•¥Î©¥ Í∏∞Î≥∏ ÌôîÎ©¥ÏúºÎ°ú Îì±Î°ùÎê©ÎãàÎã§</p>
        </div>
    </div>
</div>

    <script src="js/config.js"></script>
    <script src="js/state.js"></script>
    <script src="js/api.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/watchlist.js"></script>
    <script src="js/navigation.js"></script>

    <!-- Chart Panels (Î™®ÎìàÌôî) -->
    <script src="js/panels/gaugePanel.js"></script>
    <script src="js/panels/chartGaugePanel.js"></script>
    <script src="js/panels/chartPanel.js"></script>
    <script src="js/panels/symbolSelectorPanel.js"></script>
    <script src="js/panels/randomWalkPanel.js"></script>

    <script src="js/chart.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/quick.js"></script>
    <script>
        // ========== ÌÉÄÏûÑÌîÑÎ†àÏûÑ ÎìúÎ°≠Îã§Ïö¥ Ìï®Ïàò ==========
        function toggleTimeframeDropdown() {
            const dropdown = document.getElementById('tfDropdown');
            const btn = document.getElementById('tfDropdownBtn');
            dropdown.classList.toggle('show');
            btn.classList.toggle('open');
        }
        
        function selectTimeframe(tf, label) {
            // ÌòÑÏû¨ ÌÖçÏä§Ìä∏ ÏóÖÎç∞Ïù¥Ìä∏
            document.getElementById('currentTfText').textContent = label;
            
            // ÌôúÏÑ± ÏÉÅÌÉú Î≥ÄÍ≤Ω
            document.querySelectorAll('.tf-dropdown-item').forEach(item => {
                item.classList.remove('active');
                if (item.dataset.tf === tf) {
                    item.classList.add('active');
                }
            });
            
            // ÎìúÎ°≠Îã§Ïö¥ Îã´Í∏∞
            document.getElementById('tfDropdown').classList.remove('show');
            document.getElementById('tfDropdownBtn').classList.remove('open');
            
            // ÌÉÄÏûÑÌîÑÎ†àÏûÑ Î≥ÄÍ≤Ω Î∞è Ï∫îÎì§ Î°úÎìú
            currentTimeframe = tf;
            if (typeof ChartPanel !== 'undefined') {
                ChartPanel.loadCandles();
            }
        }
    </script>

    <script>
    // ========== ÌÉÄÏûÑÌîÑÎ†àÏûÑ Î™®Îã¨ ÌåùÏóÖ ==========
    function openTfPopup() {
        document.getElementById('tfModalOverlay').style.display = 'flex';
    }
    
    function closeTfPopup() {
        document.getElementById('tfModalOverlay').style.display = 'none';
    }
    
    function selectTimeframe(tf, label) {
        document.getElementById('tfBtnText').textContent = label;
        
        document.querySelectorAll('.tf-modal-item').forEach(item => {
            item.classList.remove('active');
            item.style.background = '#2a3444';
            item.style.color = '#ffffff';
            item.style.border = 'none';
            if (item.dataset.tf === tf) {
                item.classList.add('active');
                item.style.background = 'linear-gradient(135deg,#00d4ff,#00b4d8)';
                item.style.color = '#000000';
            }
        });
        
        closeTfPopup();
        
        currentTimeframe = tf;
        if (typeof ChartPanel !== 'undefined' && ChartPanel.loadCandles) {
            ChartPanel.loadCandles();
        }
        
        showToast(label + ' ÌÉÄÏûÑÌîÑÎ†àÏûÑ Ï†ÅÏö©', 'success');
    }
    
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') closeTfPopup();
        if (e.key === 'Escape') closeIndPopup();
    });
    
    // ========== Î≥¥Ï°∞ÏßÄÌëú Î™®Îã¨ ==========
    function openIndPopup() {
        document.getElementById('indModalOverlay').style.display = 'flex';
    }
    
    function closeIndPopup() {
        document.getElementById('indModalOverlay').style.display = 'none';
    }
    
    function toggleIndicator(item) {
        const checkbox = item.querySelector('.ind-checkbox');
        checkbox.classList.toggle('checked');
    }
    
    function filterIndicators(query) {
        const items = document.querySelectorAll('.ind-item');
        query = query.toLowerCase();
        items.forEach(item => {
            const name = item.querySelector('.ind-name').textContent.toLowerCase();
            const desc = item.querySelector('.ind-desc').textContent.toLowerCase();
            if (name.includes(query) || desc.includes(query)) {
                item.style.display = 'flex';
            } else {
                item.style.display = 'none';
            }
        });
    }
    
    function resetIndicators() {
        document.querySelectorAll('.ind-checkbox').forEach(cb => {
            cb.classList.remove('checked');
        });
        showToast('ÏßÄÌëúÍ∞Ä Ï¥àÍ∏∞ÌôîÎêòÏóàÏäµÎãàÎã§', 'info');
    }
    
    function applyIndicators() {
        const selected = [];
        document.querySelectorAll('.ind-checkbox.checked').forEach(cb => {
            const item = cb.closest('.ind-item');
            selected.push(item.dataset.ind);
        });
        
        console.log('Ï†ÅÏö©Îêú ÏßÄÌëú:', selected);
        closeIndPopup();
        showToast(selected.length + 'Í∞ú ÏßÄÌëúÍ∞Ä Ï†ÅÏö©ÎêòÏóàÏäµÎãàÎã§', 'success');
        
        // TODO: Ïã§Ï†ú Ï∞®Ìä∏Ïóê ÏßÄÌëú Ï†ÅÏö© Î°úÏßÅ
    }
    
    // ========== Ï¢ÖÎ™© Ï†ïÎ≥¥ ÏÑπÏÖò ==========
    function toggleSymbolInfoSection() {
        const content = document.getElementById('symbolInfoContent');
        const icon = document.getElementById('symbolInfoToggleIcon');
        
        content.classList.toggle('collapsed');
        icon.classList.toggle('open');
    }
    
    // Ï¢ÖÎ™© Ï†ïÎ≥¥ Îç∞Ïù¥ÌÑ∞ (MT5 Ïã§Ï†ú Îç∞Ïù¥ÌÑ∞ Í∏∞Ï§Ä)
    const symbolInfoData = {
        'BTCUSD': {
            icon: '‚Çø', iconColor: '#f7931a', name: 'Bitcoin', desc: 'Bitcoin vs US Dollar',
            lotSize: '1 Contract', tickSize: '0.01', minLot: '0.01 lot', maxLot: '10.00 lot',
            pipSize: '0.01 (2 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~15 pips',
            swapLong: '-17.76%', swapLongClass: 'negative',
            swapShort: '-11.84%', swapShortClass: 'negative',
            swap3Day: 'Wednesday',
            hours: { sun: '00:02 - 23:57', mon: '00:02 - 23:57', tue: '00:02 - 23:57', wed: '00:02 - 23:57', thu: '00:02 - 23:57', fri: '00:02 - 23:57', sat: '00:00 - 14:00' }
        },
        'EURUSD.r': {
            icon: '‚Ç¨', iconColor: '#0052cc', name: 'Euro/Dollar', desc: 'Euro vs US Dollar',
            lotSize: '100,000 EUR', tickSize: '0.00001', minLot: '0.01 lot', maxLot: '50.00 lot',
            pipSize: '0.00001 (5 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~1.0 pips',
            swapLong: '-8.9 points', swapLongClass: 'negative',
            swapShort: '+3.3 points', swapShortClass: 'positive',
            swap3Day: 'Wednesday',
            hours: { sun: '‚Äî', mon: '00:02 - 23:58', tue: '00:02 - 23:58', wed: '00:02 - 23:58', thu: '00:02 - 23:58', fri: '00:02 - 23:58', sat: '‚Äî' }
        },
        'USDJPY.r': {
            icon: '¬•', iconColor: '#dc143c', name: 'Dollar/Yen', desc: 'US Dollar vs Japanese Yen',
            lotSize: '100,000 USD', tickSize: '0.001', minLot: '0.01 lot', maxLot: '50.00 lot',
            pipSize: '0.001 (3 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~1.0 pips',
            swapLong: '+9.0 points', swapLongClass: 'positive',
            swapShort: '-19.5 points', swapShortClass: 'negative',
            swap3Day: 'Wednesday',
            hours: { sun: '‚Äî', mon: '00:02 - 23:58', tue: '00:02 - 23:58', wed: '00:02 - 23:58', thu: '00:02 - 23:58', fri: '00:02 - 23:58', sat: '‚Äî' }
        },
        'XAUUSD.r': {
            icon: '‚ú¶', iconColor: '#ffd700', name: 'Gold', desc: 'Gold vs US Dollar',
            lotSize: '100 oz', tickSize: '0.01', minLot: '0.01 lot', maxLot: '20.00 lot',
            pipSize: '0.01 (2 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~16 pips',
            swapLong: '-53.5 points', swapLongClass: 'negative',
            swapShort: '+27.6 points', swapShortClass: 'positive',
            swap3Day: 'Wednesday',
            hours: { sun: '‚Äî', mon: '01:02 - 23:58', tue: '01:02 - 23:58', wed: '01:02 - 23:58', thu: '01:02 - 23:58', fri: '01:02 - 23:58', sat: '‚Äî' }
        },
        'US100.': {
            icon: '‚¨°', iconColor: '#00b450', name: 'NASDAQ', desc: 'US Tech 100 Index Cash',
            lotSize: '20 Contract', tickSize: '0.01', minLot: '0.01 lot', maxLot: '200.00 lot',
            pipSize: '0.01 (2 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~100 pips',
            swapLong: '-165 USD', swapLongClass: 'negative',
            swapShort: '+43.4 USD', swapShortClass: 'positive',
            swap3Day: 'Friday',
            hours: { sun: '‚Äî', mon: '01:02 - 23:58', tue: '01:02 - 23:58', wed: '01:02 - 23:58', thu: '01:02 - 23:58', fri: '01:02 - 23:55', sat: '‚Äî' }
        },
        'GBPUSD.r': {
            icon: '¬£', iconColor: '#9c27b0', name: 'Pound/Dollar', desc: 'British Pound vs US Dollar',
            lotSize: '100,000 GBP', tickSize: '0.00001', minLot: '0.01 lot', maxLot: '50.00 lot',
            pipSize: '0.00001 (5 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~1.2 pips',
            swapLong: '-4.2 points', swapLongClass: 'negative',
            swapShort: '+0.8 points', swapShortClass: 'positive',
            swap3Day: 'Wednesday',
            hours: { sun: '‚Äî', mon: '00:02 - 23:58', tue: '00:02 - 23:58', wed: '00:02 - 23:58', thu: '00:02 - 23:58', fri: '00:02 - 23:58', sat: '‚Äî' }
        },
        'ETHUSD': {
            icon: 'Œû', iconColor: '#627eea', name: 'Ethereum', desc: 'Ethereum vs US Dollar',
            lotSize: '1 Contract', tickSize: '0.01', minLot: '0.01 lot', maxLot: '10.00 lot',
            pipSize: '0.01 (2 digits)', stopLevel: '0',
            spread: 'Ïú†Îèô Ïä§ÌîÑÎ†àÎìú', spreadPips: '~150 pips',
            swapLong: '-15.0%', swapLongClass: 'negative',
            swapShort: '-10.0%', swapShortClass: 'negative',
            swap3Day: 'Wednesday',
            hours: { sun: '00:02 - 23:57', mon: '00:02 - 23:57', tue: '00:02 - 23:57', wed: '00:02 - 23:57', thu: '00:02 - 23:57', fri: '00:02 - 23:57', sat: '00:00 - 14:00' }
        }
    };

    // Ï¢ÖÎ™© Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
    function updateSymbolInfo(symbol) {
        const data = symbolInfoData[symbol];
        if (!data) {
            console.warn('[updateSymbolInfo] Ï¢ÖÎ™© Ï†ïÎ≥¥ ÏóÜÏùå:', symbol);
            return;
        }
        
        console.log('[updateSymbolInfo] Ï¢ÖÎ™© Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏:', symbol);
        
        // Ï¢ÖÎ™©Î™Ö Ìó§Îçî
        const iconEl = document.getElementById('infoSymbolIcon');
        if (iconEl) {
            iconEl.textContent = data.icon;
            iconEl.style.color = data.iconColor;
        }
        
        const nameEl = document.getElementById('infoSymbolName');
        if (nameEl) nameEl.textContent = data.name;
        
        const descEl = document.getElementById('infoSymbolDesc');
        if (descEl) descEl.textContent = data.desc;
        
        const idEl = document.getElementById('infoSymbolId');
        if (idEl) idEl.textContent = symbol;
        
        // Í∏∞Î≥∏ Ï†ïÎ≥¥
        const lotSizeEl = document.getElementById('infoLotSize');
        if (lotSizeEl) lotSizeEl.textContent = data.lotSize;
        
        const tickSizeEl = document.getElementById('infoTickSize');
        if (tickSizeEl) tickSizeEl.textContent = data.tickSize;
        
        const minLotEl = document.getElementById('infoMinLot');
        if (minLotEl) minLotEl.textContent = data.minLot;
        
        const maxLotEl = document.getElementById('infoMaxLot');
        if (maxLotEl) maxLotEl.textContent = data.maxLot;
        
        const pipSizeEl = document.getElementById('infoPipSize');
        if (pipSizeEl) pipSizeEl.textContent = data.pipSize;
        
        const stopLevelEl = document.getElementById('infoStopLevel');
        if (stopLevelEl) stopLevelEl.textContent = data.stopLevel;
        
        // Ïä§ÌîÑÎ†àÎìú & Ïä§Ïôë
        const spreadEl = document.getElementById('infoSpread');
        if (spreadEl) spreadEl.textContent = data.spread;
        
        const spreadPipsEl = document.getElementById('infoSpreadPips');
        if (spreadPipsEl) spreadPipsEl.textContent = data.spreadPips;
        
        const swapLongEl = document.getElementById('infoSwapLong');
        if (swapLongEl) {
            swapLongEl.textContent = data.swapLong;
            swapLongEl.className = 'info-value ' + (data.swapLongClass || '');
        }
        
        const swapShortEl = document.getElementById('infoSwapShort');
        if (swapShortEl) {
            swapShortEl.textContent = data.swapShort;
            swapShortEl.className = 'info-value ' + (data.swapShortClass || '');
        }
        
        const swap3DayEl = document.getElementById('infoSwap3Day');
        if (swap3DayEl) swap3DayEl.textContent = data.swap3Day;
        
        // Í±∞Îûò ÏãúÍ∞Ñ
        if (data.hours) {
            const sunEl = document.getElementById('infoHoursSun');
            if (sunEl) sunEl.textContent = data.hours.sun;
            
            const monEl = document.getElementById('infoHoursMon');
            if (monEl) monEl.textContent = data.hours.mon;
            
            const tueEl = document.getElementById('infoHoursTue');
            if (tueEl) tueEl.textContent = data.hours.tue;
            
            const wedEl = document.getElementById('infoHoursWed');
            if (wedEl) wedEl.textContent = data.hours.wed;
            
            const thuEl = document.getElementById('infoHoursThu');
            if (thuEl) thuEl.textContent = data.hours.thu;
            
            const friEl = document.getElementById('infoHoursFri');
            if (friEl) friEl.textContent = data.hours.fri;
            
            const satEl = document.getElementById('infoHoursSat');
            if (satEl) {
                satEl.textContent = data.hours.sat;
                satEl.className = data.hours.sat === '‚Äî' ? 'trading-time closed' : 'trading-time';
            }
        }
    }
    
    // Ï∞®Ìä∏ ÎìúÎ°≠Îã§Ïö¥ÏóêÏÑú Ï¢ÖÎ™© ÏÑ†ÌÉù Ïãú Ìò∏Ï∂ú (Ï†ÑÏó≠ Ìï®Ïàò Ïû¨Ï†ïÏùò)
    function selectChartSymbol(element) {
        const symbol = element.dataset.symbol;
        const name = element.dataset.name;
        const icon = element.dataset.icon;
        const color = element.dataset.color;
        
        console.log('[selectChartSymbol] Ï∞®Ìä∏ ÎìúÎ°≠Îã§Ïö¥ Ï¢ÖÎ™© ÏÑ†ÌÉù:', symbol);
        
        // Ï†ÑÏó≠ Î≥ÄÏàò ÏóÖÎç∞Ïù¥Ìä∏
        chartSymbol = symbol;
        localStorage.setItem('last_chart_symbol', symbol);
        
        // Ï∞®Ìä∏ Ìó§Îçî UI ÏóÖÎç∞Ïù¥Ìä∏
        const iconEl = document.getElementById('chartSymbolIcon');
        const nameEl = document.getElementById('chartSymbolName');
        const idEl = document.getElementById('chartSymbolId');
        const dropdown = document.getElementById('chartSymbolDropdown');
        
        if (iconEl) {
            iconEl.textContent = icon;
            iconEl.style.color = color;
        }
        if (nameEl) nameEl.textContent = name;
        if (idEl) idEl.textContent = symbol;
        if (dropdown) dropdown.style.display = 'none';
        
        // Ï∞®Ìä∏ Ïû¨Ï¥àÍ∏∞Ìôî
        if (typeof ChartPanel !== 'undefined') {
            ChartPanel.reinit();
        }
        
        // Ï¢ÖÎ™© Ï†ïÎ≥¥ ÏÑπÏÖò ÏóÖÎç∞Ïù¥Ìä∏
        updateSymbolInfo(symbol);
        
        showToast(name + ' Ï∞®Ìä∏Î°ú Î≥ÄÍ≤Ω', 'success');
    }
    </script>

    <!-- ÌÉÄÏûÑÌîÑÎ†àÏûÑ Î™®Îã¨ (ÏÉà ÎîîÏûêÏù∏) -->
    <div id="tfModalOverlay" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.75); backdrop-filter:blur(8px); z-index:99999; justify-content:center; align-items:center;" onclick="closeTfPopup()">
        <div onclick="event.stopPropagation()" style="background:#1e2738; border-radius:24px; min-width:300px; max-width:340px; box-shadow:0 20px 60px rgba(0,0,0,0.6); overflow:hidden;">
            <!-- ÏÉÅÎã® Î∞î -->
            <div style="width:40px; height:4px; background:#3a4553; border-radius:2px; margin:12px auto 0;"></div>
            <!-- Ìó§Îçî -->
            <div style="padding:20px 24px 16px;">
                <span style="font-size:18px; font-weight:600; color:#ffffff; letter-spacing:-0.3px;">ÌÉÄÏûÑÌîÑÎ†àÏûÑ</span>
            </div>
            <!-- Î≤ÑÌäº Í∑∏Î¶¨Îìú -->
            <div style="display:grid; grid-template-columns:repeat(2,1fr); gap:10px; padding:0 20px 24px;">
                <button class="tf-modal-item active" data-tf="M1" onclick="selectTimeframe('M1','1M')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">1M</button>
<button class="tf-modal-item" data-tf="M5" onclick="selectTimeframe('M5','5M')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">5M</button>
<button class="tf-modal-item" data-tf="M15" onclick="selectTimeframe('M15','15M')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">15M</button>
<button class="tf-modal-item" data-tf="M30" onclick="selectTimeframe('M30','30M')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">30M</button>
<button class="tf-modal-item" data-tf="H1" onclick="selectTimeframe('H1','1H')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">1H</button>
<button class="tf-modal-item" data-tf="H4" onclick="selectTimeframe('H4','4H')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">4H</button>
<button class="tf-modal-item" data-tf="D1" onclick="selectTimeframe('D1','1D')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">1D</button>
<button class="tf-modal-item" data-tf="W1" onclick="selectTimeframe('W1','1W')" style="padding:14px 20px; background:#2a3444; border:none; border-radius:14px; color:#ffffff; font-size:15px; font-weight:500; cursor:pointer; transition:all 0.2s;">1W</button>
            </div>
        </div>
    </div>

    <!-- Î≥¥Ï°∞ÏßÄÌëú Î™®Îã¨ -->
    <div id="indModalOverlay" style="display:none; position:fixed; top:0; left:0; right:0; bottom:0; background:rgba(0,0,0,0.75); backdrop-filter:blur(8px); z-index:99999; justify-content:center; align-items:center;" onclick="closeIndPopup()">
        <div class="ind-modal" onclick="event.stopPropagation()">
            <!-- Ìó§Îçî -->
            <div class="ind-modal-header">
                <span class="ind-modal-title">Î≥¥Ï°∞ÏßÄÌëú</span>
                <button class="ind-modal-close" onclick="closeIndPopup()">‚úï</button>
            </div>
            
            <!-- Í≤ÄÏÉâ -->
            <div class="ind-modal-search">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="#6b7280" stroke-width="2">
                    <circle cx="11" cy="11" r="8"></circle>
                    <path d="m21 21-4.35-4.35"></path>
                </svg>
                <input type="text" id="indSearchInput" placeholder="ÏßÄÌëú Í≤ÄÏÉâ..." oninput="filterIndicators(this.value)">
            </div>
            
            <!-- ÏßÄÌëú Î¶¨Ïä§Ìä∏ -->
            <div class="ind-modal-list" id="indModalList">
                <!-- Ïù¥ÎèôÌèâÍ∑† Í≥ÑÏó¥ -->
                <div class="ind-item" data-ind="sma" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #9C27B0;"></div>
                    <div class="ind-info">
                        <div class="ind-name">SMA (200)</div>
                        <div class="ind-desc">Îã®ÏàúÏù¥ÎèôÌèâÍ∑†</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="ema" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #E91E63;"></div>
                    <div class="ind-info">
                        <div class="ind-name">EMA (20)</div>
                        <div class="ind-desc">ÏßÄÏàòÏù¥ÎèôÌèâÍ∑†</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="lwma" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox checked"></div>
                    <div class="ind-color-dot" style="background: #FFC107;"></div>
                    <div class="ind-info">
                        <div class="ind-name">LWMA (50)</div>
                        <div class="ind-desc">ÏÑ†ÌòïÍ∞ÄÏ§ëÏù¥ÎèôÌèâÍ∑†</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="wma" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #FF5722;"></div>
                    <div class="ind-info">
                        <div class="ind-name">WMA (14)</div>
                        <div class="ind-desc">Í∞ÄÏ§ëÏù¥ÎèôÌèâÍ∑†</div>
                    </div>
                </div>
                
                <!-- Î∞¥Îìú/Ï±ÑÎÑê Í≥ÑÏó¥ -->
                <div class="ind-item" data-ind="bb" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox checked"></div>
                    <div class="ind-color-dot" style="background: #2196F3;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Bollinger Bands</div>
                        <div class="ind-desc">Î≥ºÎ¶∞Ï†Ä Î∞¥Îìú (20, 2)</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="keltner" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #00ACC1;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Keltner Channel</div>
                        <div class="ind-desc">ÏºàÌä∏ÎÑà Ï±ÑÎÑê</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="donchian" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #26A69A;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Donchian Channel</div>
                        <div class="ind-desc">ÎèàÏπòÏïà Ï±ÑÎÑê (20)</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="envelope" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #7E57C2;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Envelope</div>
                        <div class="ind-desc">ÏóîÎ≤®Î°úÌîÑ (20, 2.5%)</div>
                    </div>
                </div>
                
                <!-- Ïò§Ïã§Î†àÏù¥ÌÑ∞ Í≥ÑÏó¥ -->
                <div class="ind-item" data-ind="rsi" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #00BCD4;"></div>
                    <div class="ind-info">
                        <div class="ind-name">RSI (14)</div>
                        <div class="ind-desc">ÏÉÅÎåÄÍ∞ïÎèÑÏßÄÏàò</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="macd" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #4CAF50;"></div>
                    <div class="ind-info">
                        <div class="ind-name">MACD</div>
                        <div class="ind-desc">Ïù¥ÎèôÌèâÍ∑†ÏàòÎ†¥ÌôïÏÇ∞ (12,26,9)</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="stoch" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #FF9800;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Stochastic</div>
                        <div class="ind-desc">Ïä§ÌÜ†Ï∫êÏä§Ìã± (14,3,3)</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="cci" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #8BC34A;"></div>
                    <div class="ind-info">
                        <div class="ind-name">CCI (20)</div>
                        <div class="ind-desc">ÏÉÅÌíàÏ±ÑÎÑêÏßÄÏàò</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="williams" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #F44336;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Williams %R</div>
                        <div class="ind-desc">ÏúåÎ¶¨ÏóÑÏä§ %R (14)</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="mfi" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #009688;"></div>
                    <div class="ind-info">
                        <div class="ind-name">MFI (14)</div>
                        <div class="ind-desc">ÏûêÍ∏àÌùêÎ¶ÑÏßÄÏàò</div>
                    </div>
                </div>
                
                <!-- Ï∂îÏÑ∏/Î≥ÄÎèôÏÑ± Í≥ÑÏó¥ -->
                <div class="ind-item" data-ind="atr" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #795548;"></div>
                    <div class="ind-info">
                        <div class="ind-name">ATR (14)</div>
                        <div class="ind-desc">ÌèâÍ∑†ÏßÑÌè≠</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="adx" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #607D8B;"></div>
                    <div class="ind-info">
                        <div class="ind-name">ADX (14)</div>
                        <div class="ind-desc">ÌèâÍ∑†Î∞©Ìñ•ÏßÄÏàò</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="psar" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #FFEB3B;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Parabolic SAR</div>
                        <div class="ind-desc">ÌååÎùºÎ≥ºÎ¶≠ SAR</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="ichimoku" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #E040FB;"></div>
                    <div class="ind-info">
                        <div class="ind-name">Ichimoku Cloud</div>
                        <div class="ind-desc">ÏùºÎ™©Í∑†ÌòïÌëú</div>
                    </div>
                </div>
                
                <!-- Í±∞ÎûòÎüâ Í≥ÑÏó¥ -->
                <div class="ind-item" data-ind="obv" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #3F51B5;"></div>
                    <div class="ind-info">
                        <div class="ind-name">OBV</div>
                        <div class="ind-desc">Í±∞ÎûòÎüâÍ∑†ÌòïÏßÄÌëú</div>
                    </div>
                </div>
                <div class="ind-item" data-ind="vwap" onclick="toggleIndicator(this)">
                    <div class="ind-checkbox"></div>
                    <div class="ind-color-dot" style="background: #673AB7;"></div>
                    <div class="ind-info">
                        <div class="ind-name">VWAP</div>
                        <div class="ind-desc">Í±∞ÎûòÎüâÍ∞ÄÏ§ëÌèâÍ∑†Í∞ÄÍ≤©</div>
                    </div>
                </div>
            </div>
            
            <!-- Ìë∏ÌÑ∞ -->
            <div class="ind-modal-footer">
                <button class="ind-btn-reset" onclick="resetIndicators()">Ï¥àÍ∏∞Ìôî</button>
                <button class="ind-btn-apply" onclick="applyIndicators()">Ï†ÅÏö©ÌïòÍ∏∞</button>
            </div>
        </div>
    </div>

    <script src="js/trading.js"></script>
    <script src="js/connection.js"></script>
    <script src="js/init.js"></script>
</body>
</html>
