{
  "permissions": {
    "allow": [
      "Bash(python split_css.py:*)",
      "Bash(dir:*)",
      "Bash(test:*)",
      "Bash(grep:*)",
      "Bash(ls:*)",
      "Bash(node -c:*)",
      "Bash(python:*)",
      "Bash(timeout /t 5 /nobreak)",
      "Bash(ping:*)",
      "Bash(netstat:*)",
      "Bash(findstr:*)",
      "Bash(taskkill:*)",
      "Bash(move \"C:\\\\Users\\\\escji\\\\trading-x_v3.1\\\\frontend\\\\app_cleaned.html\" \"C:\\\\Users\\\\escji\\\\trading-x_v3.1\\\\frontend\\\\app.html\")",
      "Bash(wc:*)",
      "Bash(git add:*)",
      "Bash(git commit:*)",
      "Bash(git rm:*)",
      "Bash(git push:*)",
      "Bash(git checkout:*)",
      "Bash(sudo systemctl restart:*)",
      "Bash(sudo systemctl status:*)",
      "Bash(journalctl:*)",
      "Bash(systemctl status:*)",
      "Bash(curl:*)",
      "Bash(pip install:*)",
      "Bash(python3:*)",
      "Bash(PGPASSWORD=trading123 psql:*)",
      "Bash(source:*)",
      "Bash(systemctl restart:*)",
      "Bash(kill:*)",
      "Bash(lsof:*)",
      "Bash(pkill:*)",
      "Bash(fuser:*)",
      "Bash(sudo kill:*)",
      "Bash(sudo systemctl reload:*)",
      "Bash(sudo systemctl:*)",
      "Bash(sudo journalctl:*)",
      "Bash(sudo fuser:*)",
      "Bash(systemctl list-units:*)",
      "Bash(find:*)",
      "Bash(systemctl kill:*)",
      "Bash(systemctl start:*)",
      "Bash(pm2 list:*)",
      "Bash(pgrep:*)",
      "Bash(/var/www/trading-x/backend/venv/bin/python3:*)",
      "WebFetch(domain:metaapi.cloud)",
      "WebFetch(domain:raw.githubusercontent.com)",
      "WebSearch",
      "Bash(killall:*)",
      "Bash(for i in 1 2 3)",
      "Bash(do echo \"=== 시도 $i ===\")",
      "Bash(done)",
      "Bash(sudo pkill:*)",
      "Bash(do echo \"=== $i ===\")",
      "Bash(tar:*)",
      "Bash(/var/www/trading-x/backend/venv/bin/pip install:*)",
      "Bash(jq:*)",
      "Bash(sudo netstat:*)",
      "Bash(ss:*)",
      "Bash(true sleep 2 timeout 120 /var/www/trading-x/backend/venv/bin/python3 -c \"\nimport asyncio\nfrom app.api.metaapi_service import startup_metaapi\n\nasync def test\\(\\):\n    print\\(''''Testing MetaAPI startup...''''\\)\n    try:\n        result = await asyncio.wait_for\\(startup_metaapi\\(\\), timeout=60\\)\n        print\\(f''''Result: {result}''''\\)\n    except asyncio.TimeoutError:\n        print\\(''''TIMEOUT after 60 seconds''''\\)\n    except Exception as e:\n        print\\(f''''Error: {e}''''\\)\n\nasyncio.run\\(test\\(\\)\\)\n\")",
      "Bash(head -15 __NEW_LINE_30e662d08822b0b4__ echo \"\" echo \"=== updateAccountStats \\(accTodayPL 부분\\) ===\")",
      "Bash(head -10 __NEW_LINE_30e662d08822b0b4__ echo \"\" echo \"=== selectPeriod \\(today/week 복원\\) ===\")",
      "Bash(git reset:*)",
      "Bash(sudo nginx:*)",
      "Bash(head -3 __NEW_LINE_5764320ec213e89c__ echo \"\" echo \"==========================================\" echo \"  ★ 기대값 ★\" echo \"==========================================\" echo \"[1-1~1-4] 모두 1 이상\" echo \"[2-1~2-2] 모두 1 이상\" echo \"[3-1] 2 이상\" echo \"[4-1] 2, [4-2] 0, [4-3] 0  ← 핵심!\" echo \"[5-1~5-3] 모두 1 이상\" echo \"[6] active \\(running\\)\")",
      "Bash(head -3 __NEW_LINE_0304f7bdb9e2e513__ echo \"\" echo \"==========================================\" echo \"  ★ 기대값 ★\" echo \"==========================================\" echo \"[1-1] spread_rejected: 2 \\(BUY+SELL\\)\" echo \"[1-2] tp_sl_failed: 2 \\(BUY+SELL\\)\" echo \"[2-1] target_cache 삭제: 1 이상\" echo \"[2-2] closed_at: 3 이상\" echo \"[3-1] _lastLiveAutoClosedAt: 2 이상\" echo \"[3-2] Basic/NoLimit: 1 이상\" echo \"[3-3] martin_reset: 3 이상\" echo \"[4-1] _orderCooldown: 6 이상 \\(BUY+SELL 각 3\\)\" echo \"[4-2] pointerEvents: 4 이상\" echo \"[5] active \\(running\\)\")",
      "Bash(timeout 30 uvicorn:*)",
      "Bash(__NEW_LINE_b325a9e26ab46114__ echo \"==========================================\")",
      "Bash(__NEW_LINE_b325a9e26ab46114__ echo \"\")",
      "Bash(psql:*)",
      "Bash(ssh root@158.247.251.146 \"git pull origin main && systemctl restart trading-x\")",
      "Bash(git revert:*)",
      "Bash(bash:*)",
      "Bash(crontab:*)",
      "Bash(chmod:*)",
      "Bash(echo '16. 다른 JS에서 차트 높이를 건드리는 코드' grep -rn chart-container frontend/js/*.js)",
      "Bash(echo ============================================ echo 'A. 차트 높이에 영향을 주는 모든 JS 파일 검색' echo ============================================ grep -rn \"chart-container\\\\|chart-wrapper\\\\|chartDetailContainer\\\\|chart-glow\\\\|indicator-panels\" frontend/js/ --include=*.js)",
      "Bash(echo 'B. 차트 높이에 영향을 주는 모든 CSS 파일 검색' grep -rn \"chart-container\\\\|chart-wrapper\" frontend/css/ --include=*.css)",
      "Bash(head -20 __NEW_LINE_b973b97948aa5d60__ echo \"\" echo \"F. chart.css 1295~1320행 \\(indicator-panels\\)\" sed -n '1295,1320p' frontend/css/chart.css)",
      "Bash(supervisorctl restart:*)",
      "Bash(pm2 logs:*)",
      "Bash(cat:*)",
      "Bash(head -10 __NEW_LINE_a3f55bb1790beace__ echo \"\" echo \"=== 재시작 후 BTC D1 시간 순서 검증 ===\" sleep 10 python3 -c \"\nimport json, subprocess, datetime\nraw = subprocess.getoutput\\(''''curl -s \"\"http://localhost:8000/api/mt5/candles/BTCUSD?timeframe=D1&count=5\"\"''''\\)\ndata = json.loads\\(raw\\)\ncandles = data.get\\(''''candles'''', []\\)\nprint\\(f''''BTC D1 캔들 수: {len\\(candles\\)}''''\\)\nif candles:\n    ok = True\n    for i, c in enumerate\\(candles\\):\n        dt = datetime.datetime.utcfromtimestamp\\(c[''''time'''']\\)\n        marker = ''''''''\n        if i > 0 and c[''''time''''] <= candles[i-1][''''time'''']:\n            marker = '''' ❌ 역순!''''\n            ok = False\n        print\\(f''''  {dt} \\(time={c[\"\"time\"\"]}\\){marker}''''\\)\n    print\\(f''''\\\\n시간 순서: {\"\"✅ 정상\"\" if ok else \"\"❌ 역순 있음\"\"} ''''\\)\nelse:\n    print\\(''''⚠️ 캔들 없음 \\(캐시 로딩 중일 수 있음\\)''''\\)\n\")",
      "Bash(node --check:*)",
      "Bash(cd /var/www/trading-x grep -rn \"window\\\\.\\\\|bid\\\\|ask\" frontend/js/panels/quickEasyPanel.js)",
      "Bash(cd /var/www/trading-x echo \"=== 1. lightweight-charts 로딩 확인 ===\" grep -n \"lightweight-charts\\\\|LightweightCharts\" frontend/index.html)",
      "Bash(head -5 __NEW_LINE_5f2ac97eb0cf812d__ echo \"\" echo \"=== 3. MetaAPI 틱 데이터 수신부 ===\" grep -n \"onTick\\\\|SynchronizationListener\\\\|safeUpdateCandle\\\\|allPrices\" frontend/js/connection.js)",
      "Bash(cd /var/www/trading-x __NEW_LINE_4fed0aa787cbb3f6__ echo \"=== Chart 탭 패널 구조 ===\" grep -n \"chartPanel\\\\|chart-container\\\\|tradingview\" frontend/index.html)",
      "Bash(head -10 echo \"\" echo \"=== Chart 탭 CSS \\(높이 관련\\) ===\" grep -B2 -A8 \"chart-container\\\\|chartPanel\\\\|tv-chart\" frontend/css/*.css)",
      "Bash(head -15 echo \"\" echo \"=== Chart 탭의 iframe/widget 높이 ===\" grep -n \"iframe\\\\|widget\\\\|tv_chart\" frontend/index.html)",
      "Bash(cd /var/www/trading-x __NEW_LINE_18049e2746ec1289__ echo \"=== placeBuy/placeSell 현재 상태 ===\" grep -n \"placeBuy\\\\|placeSell\\\\|placeOrder\" frontend/js/panels/quickEasyPanel.js)",
      "Bash(head -10 echo \"\" echo \"=== apiCall 함수 ===\" grep -n \"function apiCall\\\\|async function apiCall\" frontend/js/*.js)",
      "Bash(head -5 echo \"\" echo \"=== isDemo / API_URL / token ===\" grep -n \"window.isDemo\\\\|let isDemo\\\\|const isDemo\" frontend/js/*.js)",
      "Bash(head -5 grep -n \"API_URL\\\\s*=\" frontend/js/*.js)",
      "Bash(head:*)",
      "Bash(head -5 echo \"\" echo \"=== playSound ===\" grep -n \"function playSound\" frontend/js/*.js)",
      "Bash(head -3 echo \"\" echo \"=== showToast ===\" grep -n \"function showToast\" frontend/js/*.js)",
      "Bash(head -3 echo \"\" echo \"=== SELL/BUY 버튼 onclick ===\" grep -n \"qeSell\\\\|qeBuy\\\\|placeBuy\\\\|placeSell\" frontend/index.html)",
      "Bash(cd /var/www/trading-x grep -n -A20 \"placeSell\\(\\)\" frontend/js/panels/quickEasyPanel.js)",
      "Bash(sqlite3:*)",
      "Bash(cd /var/www/trading-x __NEW_LINE_4f9d2294d6373235__ echo \"=== 1. window.isDemo 사용처 확인 ===\" grep -n 'window.isDemo' frontend/js/panels/quickEasyPanel.js __NEW_LINE_4f9d2294d6373235__ echo \"\" echo \"=== 2. mt5.py 중복체크 + 캐시 클리어 로직 확인 ===\" grep -n 'user_live_cache\\\\|user_metaapi_cache' backend/app/api/mt5.py)",
      "Bash(\" | tr -d '''' \\\\n''''\\)\")",
      "Bash(systemctl stop:*)",
      "Bash(timeout 10 /var/www/trading-x/backend/venv/bin/python:*)",
      "Bash(cd /var/www/trading-x __NEW_LINE_8c6a833f359c697c__ echo \"=== 1. 현재 열린 포지션 확인 ===\" PGPASSWORD=trading123 psql -h localhost -U trading -d tradingx -c \"SELECT id, symbol, trade_type, entry_price, tp_price, sl_price, magic FROM demo_positions WHERE magic=100003;\" __NEW_LINE_8c6a833f359c697c__ echo \"\" echo \"=== 2. 최근 자동청산 관련 로그 ===\" journalctl -u trading-x --no-pager -n 200)",
      "Bash(tail -30 __NEW_LINE_8c6a833f359c697c__ echo \"\" echo \"=== 3. WebSocket 자동청산 체크 코드 확인 ===\" grep -n 'tp_price\\\\|sl_price\\\\|current_px\\\\|should_close' backend/app/api/demo.py)",
      "Bash(cd /var/www/trading-x __NEW_LINE_10f7c1c8377869f8__ echo \"=== 1. WebSocket 자동청산 체크 코드 ===\" sed -n '2125,2175p' backend/app/api/demo.py __NEW_LINE_10f7c1c8377869f8__ echo \"\" echo \"=== 2. Quick&Easy에서 실제 magic 전달 확인 ===\" grep -n 'magic' frontend/js/panels/quickEasyPanel.js)",
      "Bash(pm2 restart:*)",
      "Bash(sudo supervisorctl restart:*)",
      "Bash(npx pm2:*)",
      "Bash(/root/.local/share/pnpm/pm2 restart:*)",
      "Bash(/root/.local/share/pnpm/pm2:*)",
      "Bash(/root/.npm/_npx/5f7878ce38f1eb13/node_modules/pm2/bin/pm2:*)",
      "Bash(supervisorctl status:*)",
      "Bash(xargs:*)",
      "Bash(PGPASSWORD=postgres psql:*)",
      "Bash(sudo -u postgres psql:*)",
      "Bash(sudo su - postgres -c \"psql -d trading -c \"\"UPDATE grade_configs SET badge_color = ''#f97316'' WHERE grade_name = ''VIP'';\"\"\")",
      "Bash(sudo su:*)",
      "Bash(1 echo \"=== 5\\) 새 함수 ===\")",
      "Bash(cd /var/www/trading-x grep -n \"로그인\\\\|login-btn\\\\|intro-btn\\\\|btn-login\" frontend/intro.html)",
      "Bash(__NEW_LINE_2efe89efa37465cc__ sed -i 's/padding: 24px 48px;/padding: 24px 48px; min-width: 280px; white-space: nowrap;/' frontend/login.html)",
      "Bash(__NEW_LINE_2efe89efa37465cc__ git add frontend/login.html)",
      "Bash(cd /var/www/trading-x grep -n \"// Balance\" frontend/js/my.js)"
    ]
  }
}
